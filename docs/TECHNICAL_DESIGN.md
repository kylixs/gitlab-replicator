# GitLab åŒæ­¥å™¨ - æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æè¿° GitLab åŒæ­¥å™¨çš„æŠ€æœ¯æ¶æ„å’Œå®ç°æ€è·¯ï¼Œ**ä¸åŒ…å«å…·ä½“ä»£ç å®ç°**ã€‚

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šGit ä»“åº“åŒæ­¥ä¸å…¶ä»–æ•°æ®åŒæ­¥è§£è€¦
2. **å¯æ’æ‹”æ¶æ„**ï¼šæ”¯æŒå¤šç§ Git åŒæ­¥æ–¹å¼ï¼Œå¯çµæ´»åˆ‡æ¢
3. **æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°çš„åŒæ­¥æ–¹å¼
4. **å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„æ¥å£å®šä¹‰å’ŒèŒè´£åˆ’åˆ†

---

## ğŸ—ï¸ æ€»ä½“æ¶æ„

### 1. ç³»ç»Ÿåˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLI / API / Web UI                     â”‚
â”‚              (ç”¨æˆ·äº¤äº’å±‚)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Synchronization Orchestrator              â”‚
â”‚           (åŒæ­¥ç¼–æ’å™¨ - æ ¸å¿ƒåè°ƒå±‚)                   â”‚
â”‚                                                      â”‚
â”‚  â€¢ è¯»å–é…ç½®                                          â”‚
â”‚  â€¢ åˆ†ç»„/é¡¹ç›®åˆ—è¡¨è·å–                                  â”‚
â”‚  â€¢ æ‰§è¡Œæµç¨‹ç¼–æ’                                       â”‚
â”‚  â€¢ è¿›åº¦ç›‘æ§                                          â”‚
â”‚  â€¢ é”™è¯¯å¤„ç†                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git Sync Module â”‚            â”‚ Metadata Sync    â”‚
â”‚  (Git ä»“åº“åŒæ­¥)   â”‚            â”‚ (å…ƒæ•°æ®åŒæ­¥)      â”‚
â”‚                  â”‚            â”‚                  â”‚
â”‚  [å¯æ’æ‹”æ¥å£]     â”‚            â”‚ â€¢ Issues         â”‚
â”‚  â€¢ Push Mirror   â”‚            â”‚ â€¢ Merge Requests â”‚
â”‚  â€¢ Clone & Push  â”‚            â”‚ â€¢ Wiki           â”‚
â”‚  â€¢ API Mirror    â”‚            â”‚ â€¢ Members        â”‚
â”‚  â€¢ Hybrid        â”‚            â”‚ â€¢ Labels         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GitLab API Client (ç»Ÿä¸€ API å±‚)           â”‚
â”‚                                                   â”‚
â”‚  â€¢ æº GitLab è¿æ¥                                 â”‚
â”‚  â€¢ ç›®æ ‡ GitLab è¿æ¥                               â”‚
â”‚  â€¢ è®¤è¯ç®¡ç†                                       â”‚
â”‚  â€¢ é™æµæ§åˆ¶                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Source GitLabâ”‚              â”‚ Target GitLab    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è®¾è®¡

## ä¸€ã€Git åŒæ­¥æ¨¡å—ï¼ˆå¯æ’æ‹”è®¾è®¡ï¼‰

### 1.1 æ¨¡å—æ¥å£è®¾è®¡

#### æ¥å£å®šä¹‰

æ‰€æœ‰ Git åŒæ­¥å®ç°å¿…é¡»éµå¾ªç»Ÿä¸€æ¥å£ï¼š

**æ¥å£åç§°**ï¼š`GitSyncStrategy`

**æ ¸å¿ƒæ–¹æ³•**ï¼š

1. **åˆå§‹åŒ–æ–¹æ³•**
   - è¾“å…¥ï¼šæºé¡¹ç›®ä¿¡æ¯ã€ç›®æ ‡é¡¹ç›®ä¿¡æ¯ã€è®¤è¯ä¿¡æ¯
   - è¾“å‡ºï¼šåˆå§‹åŒ–çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
   - èŒè´£ï¼šéªŒè¯è¿æ¥ã€å‡†å¤‡ç¯å¢ƒ

2. **åŒæ­¥æ–¹æ³•**
   - è¾“å…¥ï¼šåŒæ­¥é…ç½®ï¼ˆåˆ†æ”¯è¿‡æ»¤ã€æ ‡ç­¾è¿‡æ»¤ç­‰ï¼‰
   - è¾“å‡ºï¼šåŒæ­¥ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ã€åŒæ­¥æ•°æ®ç»Ÿè®¡ï¼‰
   - èŒè´£ï¼šæ‰§è¡Œå®é™…çš„ Git æ•°æ®åŒæ­¥

3. **çŠ¶æ€æ£€æŸ¥æ–¹æ³•**
   - è¾“å…¥ï¼šæ— 
   - è¾“å‡ºï¼šåŒæ­¥çŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å®Œæˆ/å¤±è´¥ï¼‰
   - èŒè´£ï¼šæŸ¥è¯¢å½“å‰åŒæ­¥è¿›åº¦

4. **æ¸…ç†æ–¹æ³•**
   - è¾“å…¥ï¼šæ— 
   - è¾“å‡ºï¼šæ¸…ç†ç»“æœ
   - èŒè´£ï¼šé‡Šæ”¾èµ„æºã€æ¸…ç†ä¸´æ—¶æ•°æ®

**æ¥å£å±æ€§**ï¼š

- ç­–ç•¥åç§°
- æ˜¯å¦æ”¯æŒå¢é‡åŒæ­¥
- æ˜¯å¦éœ€è¦æœ¬åœ°å­˜å‚¨
- é¢„ä¼°æ—¶é—´å¤æ‚åº¦

---

### 1.2 å®ç°æ–¹å¼ä¸€ï¼šPush Mirror ç­–ç•¥

#### å®ç°æ€è·¯

**åŸç†**ï¼šåˆ©ç”¨ GitLab åŸç”Ÿçš„ Push Mirror åŠŸèƒ½

**é€‚ç”¨åœºæ™¯**ï¼š
- æº GitLab æœ‰é…ç½®æƒé™
- éœ€è¦å®æ—¶åŒæ­¥ï¼ˆ1-5 åˆ†é’Ÿå»¶è¿Ÿï¼‰
- ä¸éœ€è¦æœ¬åœ°å­˜å‚¨

**å·¥ä½œæµç¨‹**ï¼š

```
1. å‡†å¤‡é˜¶æ®µ
   â”œâ”€ æ£€æŸ¥æºé¡¹ç›®æ˜¯å¦å­˜åœ¨
   â”œâ”€ æ£€æŸ¥ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰
   â””â”€ éªŒè¯è®¿é—®æƒé™

2. é…ç½® Push Mirror
   â”œâ”€ é€šè¿‡ GitLab API é…ç½® Push Mirror
   â”‚  â€¢ ç›®æ ‡ URL: https://target-gitlab/group/project.git
   â”‚  â€¢ è®¤è¯æ–¹å¼: Personal Access Token
   â”‚  â€¢ é•œåƒé€‰é¡¹:
   â”‚    - Mirror only protected branches (å¯é€‰)
   â”‚    - Mirror specific branches (æ­£åˆ™è¡¨è¾¾å¼)
   â””â”€ ä¿å­˜ Mirror é…ç½® ID

3. è§¦å‘é¦–æ¬¡åŒæ­¥
   â”œâ”€ è°ƒç”¨ API æ‰‹åŠ¨è§¦å‘åŒæ­¥
   â””â”€ ç­‰å¾…é¦–æ¬¡åŒæ­¥å®Œæˆ

4. ç›‘æ§åŒæ­¥çŠ¶æ€
   â”œâ”€ è½®è¯¢ Mirror çŠ¶æ€ API
   â”œâ”€ æ£€æŸ¥åŒæ­¥è¿›åº¦
   â””â”€ è®°å½•åŒæ­¥ç»“æœ

5. åç»­ç»´æŠ¤
   â”œâ”€ å®šæœŸæ£€æŸ¥ Mirror çŠ¶æ€ï¼ˆå¥åº·æ£€æŸ¥ï¼‰
   â””â”€ å¤±è´¥æ—¶å‘Šè­¦æˆ–é‡è¯•
```

**æ•°æ®æµ**ï¼š

```
æº GitLab é¡¹ç›®
    â†“ (é…ç½® Push Mirror)
GitLab å†…éƒ¨è°ƒåº¦å™¨
    â†“ (git push --mirror)
ç›®æ ‡ GitLab é¡¹ç›®
```

**ä¼˜ç‚¹**ï¼š
- é…ç½®ç®€å•ï¼Œä¸€æ¬¡æ€§è®¾ç½®
- GitLab åŸç”Ÿæ”¯æŒï¼Œç¨³å®šå¯é 
- è‡ªåŠ¨æŒç»­åŒæ­¥ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤
- ä¸å ç”¨æœ¬åœ°èµ„æº

**ç¼ºç‚¹**ï¼š
- éœ€è¦æº GitLab ç®¡ç†å‘˜æƒé™
- ä¾èµ– GitLab è°ƒåº¦ï¼ˆ5 åˆ†é’Ÿå»¶è¿Ÿï¼‰
- æ— æ³•ç²¾ç»†æ§åˆ¶åŒæ­¥è¿‡ç¨‹
- åˆ é™¤ Mirror åå†å²åŒæ­¥è®°å½•ä¸¢å¤±

**å…³é”® API è°ƒç”¨**ï¼š

1. `POST /projects/:id/remote_mirrors` - åˆ›å»º Push Mirror
2. `PUT /projects/:id/remote_mirrors/:mirror_id` - æ›´æ–°é…ç½®
3. `GET /projects/:id/remote_mirrors/:mirror_id` - æŸ¥è¯¢çŠ¶æ€
4. `POST /projects/:id/mirror/pull` - æ‰‹åŠ¨è§¦å‘åŒæ­¥

**é…ç½®å‚æ•°**ï¼š

- `url`: ç›®æ ‡ä»“åº“ URL
- `enabled`: æ˜¯å¦å¯ç”¨
- `only_protected_branches`: ä»…é•œåƒä¿æŠ¤åˆ†æ”¯
- `keep_divergent_refs`: ä¿ç•™åˆ†æ­§å¼•ç”¨

**é”™è¯¯å¤„ç†**ï¼š

1. **Mirror åˆ›å»ºå¤±è´¥**
   - æ£€æŸ¥ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨
   - éªŒè¯è®¿é—®ä»¤ç‰Œæƒé™
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **åŒæ­¥å¤±è´¥**
   - æŸ¥çœ‹ Mirror é”™è¯¯ä¿¡æ¯
   - æ£€æŸ¥åˆ†æ”¯å†²çª
   - éªŒè¯ç›®æ ‡ä»“åº“çŠ¶æ€

3. **æƒé™é—®é¢˜**
   - ç¡®è®¤ Token å…·æœ‰ API å’Œ write_repository æƒé™
   - éªŒè¯ç›®æ ‡é¡¹ç›®çš„è®¿é—®æƒé™

---

### 1.3 å®ç°æ–¹å¼äºŒï¼šClone & Push ç­–ç•¥

#### å®ç°æ€è·¯

**åŸç†**ï¼šæœ¬åœ°å…‹éš†æºä»“åº“ï¼Œç„¶åæ¨é€åˆ°ç›®æ ‡ä»“åº“

**é€‚ç”¨åœºæ™¯**ï¼š
- æ— æº GitLab ç®¡ç†æƒé™
- éœ€è¦å®Œå…¨æ§åˆ¶åŒæ­¥è¿‡ç¨‹
- å¯ä»¥æ¥å—æœ¬åœ°å­˜å‚¨æ¶ˆè€—

**å·¥ä½œæµç¨‹**ï¼š

#### é¦–æ¬¡åŒæ­¥æµç¨‹ï¼ˆå…¨é‡ï¼‰

```
1. å‡†å¤‡é˜¶æ®µ
   â”œâ”€ åˆ›å»ºæŒä¹…åŒ–å·¥ä½œç›®å½•ï¼ˆéä¸´æ—¶ï¼‰
   â”‚  â€¢ è·¯å¾„ï¼š~/.gitlab-sync/repos/<project-id>/
   â”œâ”€ æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆé¢„ä¼°ä»“åº“å¤§å°ï¼‰
   â””â”€ éªŒè¯æº/ç›®æ ‡è®¿é—®æƒé™

2. å…‹éš†æºä»“åº“
   â”œâ”€ å…‹éš†æ–¹å¼ï¼šå®Œæ•´é•œåƒå…‹éš†
   â”‚  â€¢ git clone --mirrorï¼ˆå¿…é¡»ï¼Œä¿è¯å®Œæ•´æ€§ï¼‰
   â”‚  â€¢ ç¦æ­¢æµ…å…‹éš†ï¼ˆ--depthï¼‰- æ— æ³•ä¿è¯ä¸€è‡´æ€§
   â”‚  â€¢ åŒ…å«æ‰€æœ‰åˆ†æ”¯ã€æ ‡ç­¾ã€æäº¤å†å²ã€refs
   â”œâ”€ ä½¿ç”¨è®¤è¯ä¿¡æ¯ï¼ˆHTTP Token æˆ– SSH Keyï¼‰
   â”œâ”€ æ˜¾ç¤ºå…‹éš†è¿›åº¦
   â””â”€ æ ‡è®°ä¸ºé¦–æ¬¡åŒæ­¥

3. éªŒè¯æ•°æ®å®Œæ•´æ€§
   â”œâ”€ è¿è¡Œ git fsck æ£€æŸ¥ä»“åº“å®Œæ•´æ€§
   â”œâ”€ å¯¹æ¯”æºä»“åº“çš„ refs æ•°é‡
   â”‚  â€¢ åˆ†æ”¯æ•°é‡ä¸€è‡´
   â”‚  â€¢ æ ‡ç­¾æ•°é‡ä¸€è‡´
   â”œâ”€ éªŒè¯å…³é”® refs çš„ SHA
   â”‚  â€¢ é»˜è®¤åˆ†æ”¯ HEAD
   â”‚  â€¢ æ‰€æœ‰å—ä¿æŠ¤åˆ†æ”¯
   â””â”€ ç¡®è®¤æ²¡æœ‰æ•°æ®ä¸¢å¤±

4. æ¨é€åˆ°ç›®æ ‡ä»“åº“
   â”œâ”€ æ£€æŸ¥ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨
   â”‚  â€¢ ä¸å­˜åœ¨: é€šè¿‡ API åˆ›å»ºé¡¹ç›®
   â”‚  â€¢ å­˜åœ¨: æ£€æŸ¥æ˜¯å¦ä¸ºç©ºä»“åº“æˆ–é•œåƒ
   â”œâ”€ æ·»åŠ ç›®æ ‡ remoteï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
   â”‚  â€¢ git remote add target <url>
   â”œâ”€ æ¨é€æ‰€æœ‰æ•°æ®ï¼ˆé•œåƒæ¨¡å¼ï¼‰
   â”‚  â€¢ git push --mirror target
   â”‚  â€¢ æ¨é€æ‰€æœ‰ refsï¼ˆåˆ†æ”¯ã€æ ‡ç­¾ã€notes ç­‰ï¼‰
   â”‚  â€¢ ä¿è¯ä¸æºä»“åº“å®Œå…¨ä¸€è‡´
   â””â”€ éªŒè¯æ¨é€ç»“æœ
      â€¢ å¯¹æ¯”åˆ†æ”¯/æ ‡ç­¾æ•°é‡
      â€¢ éªŒè¯å…³é”®åˆ†æ”¯çš„ SHA
      â€¢ ç¡®è®¤ 100% ä¸€è‡´æ€§

5. è®°å½•åŒæ­¥çŠ¶æ€
   â”œâ”€ ä¿å­˜åŒæ­¥å…ƒæ•°æ®
   â”‚  â€¢ é¡¹ç›®è·¯å¾„
   â”‚  â€¢ æœ¬åœ°ä»“åº“è·¯å¾„
   â”‚  â€¢ æº/ç›®æ ‡ remote URL
   â”‚  â€¢ æœ€ååŒæ­¥æ—¶é—´
   â”‚  â€¢ åˆ†æ”¯/æ ‡ç­¾åˆ—è¡¨å¿«ç…§
   â””â”€ æ ‡è®°æœ¬åœ°ä»“åº“ä¸º"å·²åˆå§‹åŒ–"
```

#### å¢é‡åŒæ­¥æµç¨‹ï¼ˆç¬¬äºŒæ¬¡åŠä»¥å - ä¼˜åŒ–ç‰ˆï¼‰

```
1. æ£€æŸ¥æœ¬åœ°ä»“åº“
   â”œâ”€ æ£€æŸ¥æœ¬åœ°ä»“åº“ç›®å½•æ˜¯å¦å­˜åœ¨
   â”‚  â€¢ å­˜åœ¨: è¿›å…¥å¢é‡æ¨¡å¼
   â”‚  â€¢ ä¸å­˜åœ¨: é™çº§ä¸ºé¦–æ¬¡åŒæ­¥
   â”œâ”€ éªŒè¯ä»“åº“å®Œæ•´æ€§
   â”‚  â€¢ git fsck --quick
   â”‚  â€¢ æ£€æŸ¥ remotes é…ç½®
   â””â”€ è¯»å–ä¸Šæ¬¡åŒæ­¥çŠ¶æ€

2. æ›´æ–°æºä»“åº“æ•°æ®ï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰
   â”œâ”€ è¿›å…¥æœ¬åœ°é•œåƒä»“åº“ç›®å½•
   â”‚  â€¢ cd ~/.gitlab-sync/repos/<project-id>/
   â”œâ”€ æ›´æ–°æ‰€æœ‰è¿œç¨‹å¼•ç”¨
   â”‚  â€¢ git remote update origin --prune
   â”‚  æˆ–æ›´è¯¦ç»†çš„:
   â”‚  â€¢ git fetch origin --prune --tags
   â”‚  â€¢ git fetch origin '+refs/heads/*:refs/heads/*' --force
   â”œâ”€ åŒæ­¥åˆ é™¤çš„åˆ†æ”¯å’Œæ ‡ç­¾
   â”‚  â€¢ --prune é€‰é¡¹è‡ªåŠ¨æ¸…ç†å·²åˆ é™¤çš„è¿œç¨‹åˆ†æ”¯
   â”‚  â€¢ åŒæ­¥åˆ é™¤æœ¬åœ°å¯¹åº”çš„ refs
   â””â”€ éªŒè¯æ›´æ–°ç»“æœ
      â€¢ æ£€æŸ¥æ˜¯å¦æœ‰æ–°åˆ†æ”¯/æ ‡ç­¾
      â€¢ æ£€æŸ¥æ˜¯å¦æœ‰æ›´æ–°çš„æäº¤

3. æ¨é€åˆ°ç›®æ ‡ä»“åº“
   â”œâ”€ æ£€æŸ¥ç›®æ ‡ remote é…ç½®
   â”‚  â€¢ git remote get-url target
   â”‚  â€¢ å¦‚æœ‰å˜æ›´åˆ™æ›´æ–°
   â”œâ”€ æ¨é€æ‰€æœ‰æ›´æ–°
   â”‚  â€¢ æ–¹å¼ Aï¼šé•œåƒæ¨é€ï¼ˆæ¨èï¼‰
   â”‚    - git push --mirror target
   â”‚  â€¢ æ–¹å¼ Bï¼šåˆ†åˆ«æ¨é€
   â”‚    - git push target --all --force
   â”‚    - git push target --tags --force
   â”‚    - git push target --pruneï¼ˆåŒæ­¥åˆ é™¤ï¼‰
   â”œâ”€ å¤„ç†æ¨é€å†²çª
   â”‚  â€¢ å¼ºåˆ¶æ¨é€ï¼ˆ--forceï¼‰- å¦‚æœç›®æ ‡ä¸ºçº¯é•œåƒ
   â”‚  â€¢ æˆ–æ£€æµ‹å†²çªå¹¶å‘Šè­¦
   â””â”€ éªŒè¯æ¨é€ç»“æœ

4. æ›´æ–°åŒæ­¥çŠ¶æ€
   â”œâ”€ è®°å½•æœ¬æ¬¡åŒæ­¥ä¿¡æ¯
   â”‚  â€¢ æ›´æ–°æ—¶é—´æˆ³
   â”‚  â€¢ æ›´æ–°åˆ†æ”¯/æ ‡ç­¾å¿«ç…§
   â”‚  â€¢ è®°å½•å¢é‡æ•°æ®é‡
   â””â”€ ç»Ÿè®¡ä¿¡æ¯
      â€¢ æ–°å¢åˆ†æ”¯æ•°
      â€¢ æ›´æ–°åˆ†æ”¯æ•°
      â€¢ åˆ é™¤åˆ†æ”¯æ•°
      â€¢ æ–°å¢æäº¤æ•°

5. å¯é€‰ï¼šæ¸…ç†ä¼˜åŒ–
   â”œâ”€ è¿è¡Œ git gcï¼ˆå®šæœŸï¼‰
   â”‚  â€¢ å‹ç¼©å¯¹è±¡
   â”‚  â€¢ æ¸…ç†æ¾æ•£å¯¹è±¡
   â”œâ”€ æ£€æŸ¥ç£ç›˜ä½¿ç”¨
   â””â”€ åˆ é™¤è¿‡æœŸçš„ä»“åº“å‰¯æœ¬ï¼ˆå¦‚é…ç½®äº†ä¿ç•™æ—¶é—´ï¼‰
```

#### å¼‚å¸¸å¤„ç†æµç¨‹

```
1. æœ¬åœ°ä»“åº“æŸå
   â”œâ”€ æ£€æµ‹åˆ° git fsck å¤±è´¥
   â”œâ”€ å¤‡ä»½å½“å‰æœ¬åœ°ä»“åº“ï¼ˆå¯é€‰ï¼‰
   â”œâ”€ åˆ é™¤æŸåçš„ä»“åº“
   â””â”€ é‡æ–°æ‰§è¡Œé¦–æ¬¡åŒæ­¥

2. fetch å¤±è´¥
   â”œâ”€ ç½‘ç»œè¶…æ—¶: é‡è¯•ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
   â”œâ”€ è®¤è¯å¤±è´¥: æ›´æ–°å‡­æ®
   â”œâ”€ è¿ç»­å¤±è´¥ 3 æ¬¡: é™çº§ä¸ºå…¨é‡å…‹éš†
   â””â”€ è®°å½•é”™è¯¯æ—¥å¿—

3. push å¤±è´¥
   â”œâ”€ åˆ†æ”¯ä¿æŠ¤å†²çª: è·³è¿‡æˆ–å‘Šè­¦
   â”œâ”€ ç½‘ç»œä¸­æ–­: é‡è¯•
   â”œâ”€ ç›®æ ‡ä»“åº“ä¸å­˜åœ¨: é‡æ–°åˆ›å»º
   â””â”€ è®°å½•å¤±è´¥åˆ†æ”¯åˆ—è¡¨

4. ç£ç›˜ç©ºé—´ä¸è¶³
   â”œâ”€ æ¸…ç† git gc
   â”œâ”€ åˆ é™¤æœ€æ—§çš„ä»“åº“å‰¯æœ¬
   â”œâ”€ å‘Šè­¦é€šçŸ¥
   â””â”€ å¦‚ä»ä¸è¶³åˆ™å¤±è´¥
```

**æ•°æ®æµ**ï¼š

#### é¦–æ¬¡åŒæ­¥
```
æº GitLab ä»“åº“
    â†“ (git clone --mirror)
æœ¬åœ°æŒä¹…åŒ–ä»“åº“ (~/.gitlab-sync/repos/)
    â†“ (å¯é€‰ï¼šæ•°æ®å¤„ç†)
æœ¬åœ°å¤„ç†åçš„ä»“åº“
    â†“ (git push --mirror)
ç›®æ ‡ GitLab ä»“åº“
```

#### å¢é‡åŒæ­¥ï¼ˆä¼˜åŒ–åï¼‰
```
æº GitLab ä»“åº“
    â†“ (git fetch --prune - ä»…ä¼ è¾“å¢é‡)
æœ¬åœ°æŒä¹…åŒ–ä»“åº“ï¼ˆå¤ç”¨ï¼‰
    â†“ (git push --mirror - ä»…æ¨é€å˜æ›´)
ç›®æ ‡ GitLab ä»“åº“
```

**ä¼˜ç‚¹**ï¼š
- å®Œå…¨æ§åˆ¶åŒæ­¥è¿‡ç¨‹
- æ— éœ€æº GitLab ç®¡ç†æƒé™
- å¯ä»¥è¿›è¡Œæ•°æ®è¿‡æ»¤å’Œè½¬æ¢
- æ”¯æŒç¦»çº¿å¤„ç†
- é€‚åˆæ‰¹é‡åŒæ­¥å¤šä¸ªé¡¹ç›®
- âœ¨ **å¢é‡åŒæ­¥æ˜¾è‘—æé€Ÿ**ï¼ˆä»…ä¼ è¾“å˜æ›´éƒ¨åˆ†ï¼‰
- âœ¨ **è‡ªåŠ¨åŒæ­¥åˆ†æ”¯åˆ é™¤**ï¼ˆ--prune é€‰é¡¹ï¼‰
- âœ¨ **ç£ç›˜ç©ºé—´å¤ç”¨**ï¼ˆæœ¬åœ°ä»“åº“æŒä¹…åŒ–ï¼‰

**ç¼ºç‚¹**ï¼š
- éœ€è¦æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼ˆæŒä¹…åŒ–ï¼‰
- é¦–æ¬¡åŒæ­¥å¤§ä»“åº“è€—æ—¶é•¿ï¼ˆå¢é‡åå¿«é€Ÿï¼‰
- éœ€è¦ç»´æŠ¤æœ¬åœ°ä»“åº“çŠ¶æ€
- éœ€è¦å¤„ç†æœ¬åœ°ä»“åº“æŸååœºæ™¯

**æ€§èƒ½ä¼˜åŒ–**ï¼š

1. **å¹¶å‘æ§åˆ¶**
   - åŒæ—¶å¤„ç†å¤šä¸ªé¡¹ç›®ï¼ˆçº¿ç¨‹æ± /è¿›ç¨‹æ± ï¼‰
   - å•ä¸ªé¡¹ç›®å†…ä¸²è¡Œï¼ˆé¿å…å†²çªï¼‰
   - é™åˆ¶å¹¶å‘æ•°ï¼ˆé¿å…èµ„æºè€—å°½ï¼‰

2. **ç£ç›˜ä¼˜åŒ–**
   - ä½¿ç”¨ SSD å­˜å‚¨ï¼ˆæå‡ Git æ“ä½œé€Ÿåº¦ï¼‰
   - æŒä¹…åŒ–å·¥ä½œç›®å½•ï¼ˆå¤ç”¨ï¼Œé¿å…é‡å¤å…‹éš†ï¼‰
   - å®šæœŸè¿è¡Œ git gcï¼ˆå‹ç¼©å¯¹è±¡ï¼ŒèŠ‚çœç©ºé—´ï¼‰
   - é…ç½®æœ¬åœ°ä»“åº“ä¿ç•™ç­–ç•¥ï¼ˆå®šæœŸæ¸…ç†ï¼‰

3. **å¢é‡åŒæ­¥ä¼˜åŒ–**ï¼ˆæ ¸å¿ƒæ”¹è¿›ï¼‰
   - é¦–æ¬¡ï¼šå®Œæ•´ clone --mirror
   - åç»­ï¼šfetch --pruneï¼ˆä»…è·å–å¢é‡ï¼‰
   - ä¼˜åŠ¿ï¼š
     * å¤§ä»“åº“é€Ÿåº¦æå‡ 10-100 å€
     * ç½‘ç»œæµé‡å¤§å¹…å‡å°‘
     * æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆæœ¬åœ°å·²æœ‰æ•°æ®ï¼‰
     * è‡ªåŠ¨å¤„ç†åˆ†æ”¯/æ ‡ç­¾åˆ é™¤

4. **ç½‘ç»œä¼˜åŒ–**
   - å¢é‡ä¼ è¾“ï¼ˆä»…ä¼ è¾“æ–°å¯¹è±¡ï¼‰
   - æ–­ç‚¹ç»­ä¼ ï¼ˆç½‘ç»œä¸­æ–­åç»§ç»­ï¼‰
   - å‹ç¼©ä¼ è¾“ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰

5. **å¤§ä»“åº“å¤„ç†**
   - å®Œæ•´å…‹éš†ï¼ˆå¿…é¡»ï¼Œç¦æ­¢æµ…å…‹éš†ï¼‰
   - LFS å¯¹è±¡åŒæ­¥ï¼ˆgit lfs fetch --allï¼‰
   - è€å¿ƒç­‰å¾…ï¼ˆå¤§ä»“åº“é¦–æ¬¡å…‹éš†éœ€è¦æ—¶é—´ï¼‰
   - ç½‘ç»œä¼˜åŒ–ï¼ˆç¨³å®šè¿æ¥ï¼Œé¿å…è¶…æ—¶ï¼‰

**å¢é‡åŒæ­¥æ€§èƒ½å¯¹æ¯”**ï¼š

| åœºæ™¯ | é¦–æ¬¡åŒæ­¥ | å¢é‡åŒæ­¥ï¼ˆä¼˜åŒ–åï¼‰ | æå‡æ¯”ä¾‹ |
|------|---------|------------------|---------|
| **å°ä»“åº“ï¼ˆ< 100MBï¼‰** | 30 ç§’ | 5 ç§’ | 6x |
| **ä¸­ä»“åº“ï¼ˆ100MB-1GBï¼‰** | 5 åˆ†é’Ÿ | 30 ç§’ | 10x |
| **å¤§ä»“åº“ï¼ˆ1GB-10GBï¼‰** | 30 åˆ†é’Ÿ | 2 åˆ†é’Ÿ | 15x |
| **è¶…å¤§ä»“åº“ï¼ˆ> 10GBï¼‰** | 2 å°æ—¶ | 5 åˆ†é’Ÿ | 24x+ |

**å¢é‡åŒæ­¥å…³é”®å‘½ä»¤**ï¼š

```
æ ¸å¿ƒå‘½ä»¤è§£æï¼š

1. git remote update origin --prune
   â€¢ æ›´æ–°æ‰€æœ‰è¿œç¨‹åˆ†æ”¯å¼•ç”¨
   â€¢ --prune: åˆ é™¤è¿œç¨‹å·²åˆ é™¤çš„åˆ†æ”¯

2. git fetch origin --prune --tags
   â€¢ è·å–æ‰€æœ‰æ–°æäº¤
   â€¢ æ›´æ–°æ‰€æœ‰æ ‡ç­¾
   â€¢ æ¸…ç†å·²åˆ é™¤çš„è¿œç¨‹å¼•ç”¨

3. git fetch origin '+refs/heads/*:refs/heads/*' --force
   â€¢ å¼ºåˆ¶æ›´æ–°æ‰€æœ‰åˆ†æ”¯ï¼ˆå¤„ç† force pushï¼‰
   â€¢ + å·è¡¨ç¤ºå¼ºåˆ¶æ›´æ–°æœ¬åœ°å¼•ç”¨

4. git push --mirror target
   â€¢ é•œåƒæ¨é€æ‰€æœ‰å¼•ç”¨åˆ°ç›®æ ‡
   â€¢ åŒ…æ‹¬åˆ†æ”¯ã€æ ‡ç­¾ã€refs

5. git push target --prune
   â€¢ æ¨é€å¹¶æ¸…ç†ç›®æ ‡çš„å·²åˆ é™¤åˆ†æ”¯
   â€¢ ä¿æŒç›®æ ‡ä¸æºä¸€è‡´
```

**çŠ¶æ€ç®¡ç†**ï¼š

```
çŠ¶æ€æ–‡ä»¶ç»“æ„ï¼š

~/.gitlab-sync/state/<project-id>.json
{
  "project_id": 12345,
  "project_path": "group/subgroup/project",
  "local_repo_path": "~/.gitlab-sync/repos/12345",
  "source_url": "https://source-gitlab.com/group/project.git",
  "target_url": "https://target-gitlab.com/group/project.git",
  "last_sync_time": "2025-12-13T12:00:00Z",
  "sync_mode": "incremental",  // "full" or "incremental"
  "sync_count": 5,              // å·²æ‰§è¡Œæ¬¡æ•°
  "branches": {
    "main": "abc123...",
    "develop": "def456..."
  },
  "tags": ["v1.0", "v1.1"],
  "stats": {
    "total_size": "1.2GB",
    "last_sync_duration": 120,  // ç§’
    "new_branches": 0,
    "updated_branches": 2,
    "deleted_branches": 0,
    "new_commits": 15
  }
}
```

**é”™è¯¯å¤„ç†**ï¼š

1. **å…‹éš†å¤±è´¥**
   - ç½‘ç»œè¶…æ—¶ï¼šé‡è¯•æœºåˆ¶ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
   - è®¤è¯å¤±è´¥ï¼šæ£€æŸ¥ Token æƒé™
   - ç£ç›˜ç©ºé—´ä¸è¶³ï¼šæ¸…ç†ç©ºé—´æˆ–å‘Šè­¦

2. **æ¨é€å¤±è´¥**
   - åˆ†æ”¯ä¿æŠ¤ï¼šè°ƒæ•´ä¿æŠ¤è®¾ç½®
   - å†²çªï¼šå¼ºåˆ¶æ¨é€ï¼ˆ--forceï¼‰æˆ–å‘Šè­¦
   - ç½‘ç»œä¸­æ–­ï¼šæ–­ç‚¹ç»­ä¼ 

3. **æ•°æ®å®Œæ•´æ€§**
   - å…‹éš†åéªŒè¯ï¼šgit fsck
   - æ¨é€åå¯¹æ¯”ï¼šrefs æ•°é‡ã€æœ€æ–° commit SHA

---

### 1.4 å®ç°æ–¹å¼ä¸‰ï¼šAPI Mirror ç­–ç•¥

#### å®ç°æ€è·¯

**åŸç†**ï¼šé€šè¿‡ GitLab API è·å–ä»“åº“æ•°æ®ï¼Œé‡å»ºåˆ°ç›®æ ‡

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦ç»†ç²’åº¦æ§åˆ¶
- éœ€è¦æ•°æ®è½¬æ¢ï¼ˆå¦‚è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼‰
- è·¨ç‰ˆæœ¬è¿ç§»ï¼ˆAPI å…¼å®¹æ€§å¥½ï¼‰

**å·¥ä½œæµç¨‹**ï¼š

```
1. è·å–æºä»“åº“å…ƒæ•°æ®
   â”œâ”€ è·å–åˆ†æ”¯åˆ—è¡¨ï¼ˆBranches APIï¼‰
   â”œâ”€ è·å–æ ‡ç­¾åˆ—è¡¨ï¼ˆTags APIï¼‰
   â”œâ”€ è·å–æäº¤å†å²ï¼ˆCommits APIï¼‰
   â””â”€ è·å–ä»“åº“æ–‡ä»¶æ ‘ï¼ˆRepository Files APIï¼‰

2. åœ¨ç›®æ ‡åˆ›å»ºé¡¹ç›®ç»“æ„
   â”œâ”€ åˆ›å»ºç©ºé¡¹ç›®ï¼ˆProjects APIï¼‰
   â”œâ”€ è®¾ç½®é¡¹ç›®å±æ€§
   â””â”€ åˆå§‹åŒ–ç©ºä»“åº“

3. åˆ†æ‰¹åŒæ­¥æ•°æ®
   â”œâ”€ æ–¹å¼ Aï¼šé€šè¿‡ API é€ä¸ªåˆ›å»º
   â”‚  â€¢ éå†æäº¤å†å²
   â”‚  â€¢ é‡å»ºæ–‡ä»¶æ ‘
   â”‚  â€¢ åˆ›å»ºåˆ†æ”¯å’Œæ ‡ç­¾
   â”‚
   â””â”€ æ–¹å¼ Bï¼šæ··åˆæ¨¡å¼
      â€¢ æ ¸å¿ƒæ•°æ®ç”¨ git clone
      â€¢ å…ƒæ•°æ®ç”¨ API åŒæ­¥

4. éªŒè¯åŒæ­¥ç»“æœ
   â”œâ”€ å¯¹æ¯”åˆ†æ”¯æ•°é‡
   â”œâ”€ å¯¹æ¯”æ ‡ç­¾æ•°é‡
   â””â”€ æŠ½æ ·éªŒè¯æäº¤ SHA
```

**æ•°æ®æµ**ï¼š

```
æº GitLab API
    â†“ (REST/GraphQL)
å…ƒæ•°æ®æå–
    â†“
æ•°æ®è½¬æ¢/è¿‡æ»¤
    â†“ (REST API)
ç›®æ ‡ GitLab API
```

**ä¼˜ç‚¹**ï¼š
- ç²¾ç»†æ§åˆ¶æ•°æ®åŒæ­¥
- å¯ä»¥è¿›è¡Œæ•°æ®æ¸…æ´—
- æ”¯æŒè·¨ç‰ˆæœ¬è¿ç§»
- æ— éœ€æœ¬åœ°å¤§é‡å­˜å‚¨

**ç¼ºç‚¹**ï¼š
- API è°ƒç”¨é¢‘ç¹ï¼Œé€Ÿåº¦æ…¢
- å— API é™æµå½±å“
- å®ç°å¤æ‚åº¦é«˜
- ä¸é€‚åˆå¤§ä»“åº“ï¼ˆæ€§èƒ½å·®ï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä»…åŒæ­¥ç‰¹å®šåˆ†æ”¯/æ ‡ç­¾
- éœ€è¦ä¿®æ”¹æäº¤ä¿¡æ¯
- åŒæ­¥å…ƒæ•°æ®ä¸ºä¸»ï¼ˆé…åˆ git å·¥å…·ï¼‰

**é™åˆ¶**ï¼š
- API é™æµï¼šæ¯åˆ†é’Ÿ 600 æ¬¡ï¼ˆå¯é…ç½®ï¼‰
- å¤§æ–‡ä»¶ï¼šä¸é€‚åˆé€šè¿‡ API ä¼ è¾“
- å†å²è®°å½•ï¼šæ·±åº¦å†å²é‡å»ºå›°éš¾

---

### 1.5 å®ç°æ–¹å¼å››ï¼šHybrid æ··åˆç­–ç•¥

#### å®ç°æ€è·¯

**åŸç†**ï¼šç»“åˆå¤šç§ç­–ç•¥çš„ä¼˜åŠ¿ï¼ŒæŒ‰åœºæ™¯é€‰æ‹©

**ç­–ç•¥é€‰æ‹©é€»è¾‘**ï¼š

```
å†³ç­–æµç¨‹ï¼š

1. æ£€æŸ¥æº GitLab æƒé™
   â”œâ”€ æœ‰ç®¡ç†å‘˜æƒé™ â†’ è€ƒè™‘ Push Mirror
   â””â”€ æ— ç®¡ç†å‘˜æƒé™ â†’ Clone & Push

2. æ£€æŸ¥ä»“åº“å¤§å°
   â”œâ”€ å°ä»“åº“ï¼ˆ< 100MBï¼‰â†’ Clone & Pushï¼ˆå¿«é€Ÿï¼‰
   â”œâ”€ ä¸­ä»“åº“ï¼ˆ100MB - 1GBï¼‰â†’ Clone & Push æˆ– Push Mirror
   â””â”€ å¤§ä»“åº“ï¼ˆ> 1GBï¼‰â†’ Push Mirrorï¼ˆæ¨èï¼‰

3. æ£€æŸ¥åŒæ­¥é¢‘ç‡éœ€æ±‚
   â”œâ”€ å®æ—¶åŒæ­¥ï¼ˆ< 5 åˆ†é’Ÿï¼‰â†’ Push Mirror
   â”œâ”€ å®šæœŸåŒæ­¥ï¼ˆå°æ—¶/å¤©ï¼‰â†’ Clone & Push
   â””â”€ ä¸€æ¬¡æ€§è¿ç§» â†’ Clone & Push

4. æ£€æŸ¥ç½‘ç»œç¯å¢ƒ
   â”œâ”€ å†…ç½‘é«˜é€Ÿ â†’ Clone & Push
   â”œâ”€ å…¬ç½‘é™é€Ÿ â†’ Push Mirror
   â””â”€ è·¨å¢ƒç½‘ç»œ â†’ Push Mirrorï¼ˆé¿å…ä¸­æ–­ï¼‰

5. ç‰¹æ®Šéœ€æ±‚
   â”œâ”€ éœ€è¦æ•°æ®è¿‡æ»¤ â†’ Clone & Push
   â”œâ”€ éœ€è¦æ•°æ®è½¬æ¢ â†’ Clone & Push + API
   â””â”€ éœ€è¦æœ€å°åŒ–ç»´æŠ¤ â†’ Push Mirror
```

**ç»„åˆæ¨¡å¼**ï¼š

**æ¨¡å¼ 1ï¼šPush Mirror + Clone & Push å¤‡ä»½**
```
ä¸»è¦æ–¹å¼ï¼šPush Mirrorï¼ˆæŒç»­åŒæ­¥ï¼‰
å¤‡ä»½æ–¹å¼ï¼šå®šæœŸ Clone & Pushï¼ˆå®Œæ•´éªŒè¯ï¼‰

æµç¨‹ï¼š
1. é¦–æ¬¡ï¼šClone & Push å…¨é‡åŒæ­¥
2. æ—¥å¸¸ï¼šPush Mirror è‡ªåŠ¨åŒæ­¥
3. å®šæœŸï¼šClone & Push éªŒè¯ä¸€è‡´æ€§
```

**æ¨¡å¼ 2ï¼šClone & Push + API è¡¥å……**
```
Git æ•°æ®ï¼šClone & Pushï¼ˆå®Œæ•´å¿«é€Ÿï¼‰
å…ƒæ•°æ®ï¼šAPI åŒæ­¥ï¼ˆç²¾ç¡®æ§åˆ¶ï¼‰

æµç¨‹ï¼š
1. Git ä»“åº“ï¼šgit clone --mirror + git push --mirror
2. å…ƒæ•°æ®ï¼šAPI åŒæ­¥ Labelsã€Milestones ç­‰
3. åä½œæ•°æ®ï¼šAPI åŒæ­¥ Issuesã€MR
```

**æ¨¡å¼ 3ï¼šåˆ†å±‚ç­–ç•¥**
```
å°é¡¹ç›®ï¼šClone & Pushï¼ˆç®€å•ç›´æ¥ï¼‰
ä¸­é¡¹ç›®ï¼šPush Mirrorï¼ˆè‡ªåŠ¨åŒ–ï¼‰
å¤§é¡¹ç›®ï¼šPush Mirror + å¢é‡éªŒè¯

è‡ªåŠ¨é€‰æ‹©ï¼šæ ¹æ®ä»“åº“å¤§å°è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥
```

**ä¼˜ç‚¹**ï¼š
- çµæ´»é€‚åº”ä¸åŒåœºæ™¯
- ä¼˜åŒ–èµ„æºåˆ©ç”¨
- æé«˜æˆåŠŸç‡

**ç¼ºç‚¹**ï¼š
- å®ç°å¤æ‚åº¦é«˜
- éœ€è¦ç»´æŠ¤å¤šå¥—é€»è¾‘
- å†³ç­–é€»è¾‘å¯èƒ½å‡ºé”™

---

### 1.6 ç­–ç•¥å¯¹æ¯”çŸ©é˜µ

| ç‰¹æ€§ | Push Mirror | Clone & Push | API Mirror | Hybrid |
|------|------------|--------------|-----------|--------|
| **éœ€è¦æºæƒé™** | æ˜¯ï¼ˆç®¡ç†å‘˜ï¼‰ | å¦ | å¦ | è§†æƒ…å†µ |
| **æœ¬åœ°å­˜å‚¨** | æ— éœ€ | éœ€è¦ | å°‘é‡ | è§†æƒ…å†µ |
| **åŒæ­¥é€Ÿåº¦** | å¿«ï¼ˆ1-5åˆ†é’Ÿï¼‰ | ä¸­ï¼ˆå–å†³äºå¤§å°ï¼‰ | æ…¢ | ä¼˜åŒ–åå¿« |
| **å®æ—¶æ€§** | é«˜ | ä½-ä¸­ | ä½ | é«˜ |
| **èµ„æºæ¶ˆè€—** | ä½ | ä¸­-é«˜ | ä½ | ä¸­ |
| **å¯æ§æ€§** | ä½ | é«˜ | é«˜ | é«˜ |
| **æ•°æ®è½¬æ¢** | ä¸æ”¯æŒ | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ |
| **å¤§ä»“åº“æ”¯æŒ** | ä¼˜ç§€ | ä¸€èˆ¬ | å·® | ä¼˜ç§€ |
| **ç»´æŠ¤æˆæœ¬** | ä½ | ä¸­ | é«˜ | ä¸­ |
| **é€‚ç”¨åœºæ™¯** | æŒç»­åŒæ­¥ | æ‰¹é‡è¿ç§» | å…ƒæ•°æ®åŒæ­¥ | é€šç”¨ |

---

## äºŒã€åŒæ­¥ç¼–æ’å™¨ï¼ˆOrchestratorï¼‰

### 2.1 æ ¸å¿ƒèŒè´£

**åŠŸèƒ½æ¸…å•**ï¼š

1. **é…ç½®ç®¡ç†**
   - è¯»å–é…ç½®æ–‡ä»¶ï¼ˆYAML/JSONï¼‰
   - éªŒè¯é…ç½®å®Œæ•´æ€§
   - è§£æåŒæ­¥è§„åˆ™

2. **è¿æ¥ç®¡ç†**
   - å»ºç«‹æº/ç›®æ ‡ GitLab è¿æ¥
   - ç®¡ç†è®¤è¯ Token
   - è¿æ¥æ± ç»´æŠ¤

3. **ä»»åŠ¡è§„åˆ’**
   - è·å–å¾…åŒæ­¥çš„åˆ†ç»„/é¡¹ç›®åˆ—è¡¨
   - åº”ç”¨è¿‡æ»¤è§„åˆ™ï¼ˆé»‘ç™½åå•ï¼‰
   - ç”ŸæˆåŒæ­¥ä»»åŠ¡é˜Ÿåˆ—

4. **æµç¨‹ç¼–æ’**
   - é€‰æ‹© Git åŒæ­¥ç­–ç•¥
   - åè°ƒ Git åŒæ­¥ + å…ƒæ•°æ®åŒæ­¥
   - ç®¡ç†åŒæ­¥é¡ºåºï¼ˆåˆ†ç»„ â†’ é¡¹ç›® â†’ æ•°æ®ï¼‰

5. **æ‰§è¡Œæ§åˆ¶**
   - å¹¶å‘æ§åˆ¶ï¼ˆçº¿ç¨‹/è¿›ç¨‹æ± ï¼‰
   - ä»»åŠ¡è°ƒåº¦
   - è¶…æ—¶ç®¡ç†

6. **è¿›åº¦ç›‘æ§**
   - å®æ—¶è¿›åº¦ç»Ÿè®¡
   - çŠ¶æ€æ±‡æ€»
   - æ—¥å¿—è®°å½•

7. **é”™è¯¯å¤„ç†**
   - å¼‚å¸¸æ•è·
   - é‡è¯•æœºåˆ¶
   - å¤±è´¥ä»»åŠ¡è®°å½•

---

### 2.2 åŒæ­¥æµç¨‹

#### ä¸»æµç¨‹

```
1. åˆå§‹åŒ–é˜¶æ®µ
   â”œâ”€ åŠ è½½é…ç½®æ–‡ä»¶
   â”œâ”€ éªŒè¯æº/ç›®æ ‡ GitLab è¿æ¥
   â”œâ”€ æ£€æŸ¥æƒé™ï¼ˆAPIã€ä»“åº“è®¿é—®ï¼‰
   â””â”€ åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ

2. è§„åˆ’é˜¶æ®µ
   â”œâ”€ è·å–æº GitLab åˆ†ç»„æ ‘
   â”œâ”€ è·å–æº GitLab é¡¹ç›®åˆ—è¡¨
   â”œâ”€ åº”ç”¨è¿‡æ»¤è§„åˆ™
   â”‚  â€¢ ç™½åå•ï¼šä»…åŒ…å«æŒ‡å®šè·¯å¾„
   â”‚  â€¢ é»‘åå•ï¼šæ’é™¤æŒ‡å®šè·¯å¾„
   â”‚  â€¢ æ­£åˆ™åŒ¹é…ï¼šè·¯å¾„æ¨¡å¼åŒ¹é…
   â”œâ”€ æ£€æŸ¥ç›®æ ‡ GitLab ç°æœ‰ç»“æ„
   â”œâ”€ ç”Ÿæˆå¾…åˆ›å»ºåˆ†ç»„åˆ—è¡¨
   â”œâ”€ ç”Ÿæˆå¾…åŒæ­¥é¡¹ç›®åˆ—è¡¨
   â””â”€ ä¼°ç®—ä»»åŠ¡é‡å’Œæ—¶é—´

3. åˆ†ç»„åˆ›å»ºé˜¶æ®µ
   â”œâ”€ æŒ‰å±‚çº§é¡ºåºåˆ›å»ºåˆ†ç»„
   â”‚  â€¢ é¡¶å±‚åˆ†ç»„ â†’ äºŒçº§åˆ†ç»„ â†’ ä¸‰çº§åˆ†ç»„...
   â”œâ”€ ä¿æŒè·¯å¾„ä¸€è‡´æ€§
   â”‚  â€¢ æº: group/subgroup â†’ ç›®æ ‡: group/subgroup
   â”œâ”€ å¤åˆ¶åˆ†ç»„å±æ€§
   â”‚  â€¢ åç§°ã€æè¿°ã€å¯è§æ€§
   â””â”€ è®°å½•åˆ†ç»„æ˜ å°„å…³ç³»

4. é¡¹ç›®åˆ›å»ºé˜¶æ®µ
   â”œâ”€ åœ¨ç›®æ ‡åˆ›å»ºç©ºé¡¹ç›®
   â”‚  â€¢ è·¯å¾„ä¸æºä¿æŒä¸€è‡´
   â”‚  â€¢ å¤åˆ¶åŸºç¡€å±æ€§
   â”œâ”€ è®¾ç½®é¡¹ç›®å¯è§æ€§
   â””â”€ è®°å½•é¡¹ç›®æ˜ å°„å…³ç³»

5. Git ä»“åº“åŒæ­¥é˜¶æ®µ
   â”œâ”€ é€‰æ‹©åŒæ­¥ç­–ç•¥
   â”‚  â€¢ æ ¹æ®é…ç½®æˆ–è‡ªåŠ¨é€‰æ‹©
   â”œâ”€ å¹¶å‘æ‰§è¡Œ Git åŒæ­¥
   â”‚  â€¢ çº¿ç¨‹æ± /è¿›ç¨‹æ± 
   â”‚  â€¢ æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ä»»åŠ¡
   â”œâ”€ ç›‘æ§åŒæ­¥è¿›åº¦
   â”‚  â€¢ å®æ—¶ç»Ÿè®¡
   â”‚  â€¢ æ—¥å¿—è®°å½•
   â””â”€ å¤„ç†å¤±è´¥ä»»åŠ¡
      â€¢ è®°å½•é”™è¯¯
      â€¢ å¯é€‰ï¼šè‡ªåŠ¨é‡è¯•

6. å…ƒæ•°æ®åŒæ­¥é˜¶æ®µï¼ˆå¯é€‰ï¼‰
   â”œâ”€ Issues åŒæ­¥
   â”œâ”€ Merge Requests åŒæ­¥
   â”œâ”€ Wiki åŒæ­¥
   â”œâ”€ Labels/Milestones åŒæ­¥
   â””â”€ æˆå‘˜æƒé™åŒæ­¥

7. éªŒè¯é˜¶æ®µï¼ˆä¸¥æ ¼ä¸€è‡´æ€§æ£€æŸ¥ï¼‰
   â”œâ”€ æ£€æŸ¥åˆ†ç»„ç»“æ„å®Œæ•´æ€§
   â”‚  â€¢ åˆ†ç»„æ•°é‡ä¸€è‡´
   â”‚  â€¢ åˆ†ç»„å±‚çº§ç»“æ„ä¸€è‡´
   â”‚  â€¢ åˆ†ç»„è·¯å¾„å®Œå…¨åŒ¹é…
   â”œâ”€ æ£€æŸ¥é¡¹ç›®æ•°é‡
   â”‚  â€¢ é¡¹ç›®æ€»æ•°ä¸€è‡´
   â”‚  â€¢ é¡¹ç›®è·¯å¾„å®Œå…¨åŒ¹é…
   â”œâ”€ éªŒè¯ Git ä»“åº“ï¼ˆæ ¸å¿ƒéªŒè¯ï¼‰
   â”‚  â€¢ åˆ†æ”¯æ•°é‡ 100% ä¸€è‡´
   â”‚  â€¢ æ ‡ç­¾æ•°é‡ 100% ä¸€è‡´
   â”‚  â€¢ æ‰€æœ‰åˆ†æ”¯çš„ HEAD SHA ä¸€è‡´
   â”‚  â€¢ æ‰€æœ‰æ ‡ç­¾çš„ SHA ä¸€è‡´
   â”‚  â€¢ refs å®Œå…¨åŒ¹é…ï¼ˆåŒ…æ‹¬ refs/notes ç­‰ï¼‰
   â”‚  â€¢ æäº¤å†å²å®Œæ•´æ€§ï¼ˆgit fsckï¼‰
   â”œâ”€ éªŒè¯å…ƒæ•°æ®ï¼ˆå¦‚å¯ç”¨ï¼‰
   â”‚  â€¢ Issues æ•°é‡å¯¹æ¯”
   â”‚  â€¢ MR æ•°é‡å¯¹æ¯”
   â””â”€ ç”Ÿæˆä¸€è‡´æ€§æŠ¥å‘Š
      â€¢ å®Œå…¨ä¸€è‡´ â†’ æˆåŠŸ
      â€¢ å­˜åœ¨å·®å¼‚ â†’ å¤±è´¥å¹¶è¯¦ç»†è¯´æ˜

8. å®Œæˆé˜¶æ®µ
   â”œâ”€ ç”ŸæˆåŒæ­¥æŠ¥å‘Š
   â”‚  â€¢ æˆåŠŸï¼šåˆ†ç»„æ•°ã€é¡¹ç›®æ•°
   â”‚  â€¢ å¤±è´¥ï¼šå¤±è´¥é¡¹ç›®åˆ—è¡¨åŠåŸå› 
   â”‚  â€¢ ç»Ÿè®¡ï¼šæ€»è€—æ—¶ã€æ•°æ®é‡
   â”œâ”€ ä¿å­˜çŠ¶æ€æ–‡ä»¶
   â”‚  â€¢ ç”¨äºå¢é‡åŒæ­¥æˆ–ç»­ä¼ 
   â””â”€ æ¸…ç†ä¸´æ—¶æ•°æ®
```

#### å¢é‡åŒæ­¥æµç¨‹

```
1. åŠ è½½ä¸Šæ¬¡åŒæ­¥çŠ¶æ€
   â”œâ”€ è¯»å–çŠ¶æ€æ–‡ä»¶
   â”œâ”€ è·å–åŒæ­¥æ—¶é—´æˆ³
   â””â”€ è·å–å·²åŒæ­¥é¡¹ç›®åˆ—è¡¨

2. æ£€æµ‹å˜æ›´
   â”œâ”€ è·å–æº GitLab æ–°å¢åˆ†ç»„
   â”œâ”€ è·å–æº GitLab æ–°å¢é¡¹ç›®
   â”œâ”€ æ£€æµ‹é¡¹ç›®æ›´æ–°
   â”‚  â€¢ é€šè¿‡ last_activity_at æ—¶é—´æˆ³
   â”‚  â€¢ æˆ–é€šè¿‡ Git refs å¯¹æ¯”
   â””â”€ æ£€æµ‹å…ƒæ•°æ®å˜æ›´ï¼ˆIssues/MRï¼‰

3. æ‰§è¡Œå¢é‡åŒæ­¥
   â”œâ”€ åˆ›å»ºæ–°å¢åˆ†ç»„
   â”œâ”€ åˆ›å»ºæ–°å¢é¡¹ç›®
   â”œâ”€ æ›´æ–°å·²å˜æ›´é¡¹ç›®
   â”‚  â€¢ Git: fetch + push
   â”‚  â€¢ å…ƒæ•°æ®: API å¢é‡æ›´æ–°
   â””â”€ å¯é€‰ï¼šåˆ é™¤å·²åˆ é™¤é¡¹ç›®

4. æ›´æ–°çŠ¶æ€æ–‡ä»¶
   â”œâ”€ è®°å½•æ–°çš„åŒæ­¥æ—¶é—´æˆ³
   â””â”€ æ›´æ–°é¡¹ç›®åˆ—è¡¨
```

---

### 2.3 å¹¶å‘æ§åˆ¶ç­–ç•¥

#### å¹¶å‘å±‚çº§

```
å±‚çº§ 1ï¼šåˆ†ç»„çº§å¹¶å‘ï¼ˆä¸æ¨èï¼‰
  â€¢ å¤šä¸ªé¡¶å±‚åˆ†ç»„å¹¶å‘åˆ›å»º
  â€¢ é£é™©ï¼šè·¯å¾„å†²çª

å±‚çº§ 2ï¼šé¡¹ç›®çº§å¹¶å‘ï¼ˆæ¨èï¼‰
  â€¢ å¤šä¸ªé¡¹ç›®å¹¶å‘åŒæ­¥
  â€¢ æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ä»»åŠ¡
  â€¢ äº’ä¸å¹²æ‰°

å±‚çº§ 3ï¼šé¡¹ç›®å†…æ•°æ®å¹¶å‘ï¼ˆå¯é€‰ï¼‰
  â€¢ Git åŒæ­¥ + å…ƒæ•°æ®åŒæ­¥å¹¶å‘
  â€¢ åŒä¸€é¡¹ç›®çš„ Issues/MR å¹¶å‘
```

#### å¹¶å‘é…ç½®

**å…³é”®å‚æ•°**ï¼š

1. **æœ€å¤§å¹¶å‘æ•°**
   - å»ºè®®å€¼ï¼šCPU æ ¸å¿ƒæ•° Ã— 2
   - èŒƒå›´ï¼š1-20
   - è€ƒè™‘å› ç´ ï¼š
     * ç½‘ç»œå¸¦å®½
     * ç£ç›˜ I/Oï¼ˆClone & Push ç­–ç•¥ï¼‰
     * API é™æµï¼ˆç›®æ ‡ GitLabï¼‰

2. **ä»»åŠ¡é˜Ÿåˆ—å¤§å°**
   - å»ºè®®å€¼ï¼šå¹¶å‘æ•° Ã— 3
   - é˜²æ­¢å†…å­˜æº¢å‡º

3. **è¶…æ—¶è®¾ç½®**
   - Git å…‹éš†è¶…æ—¶ï¼š30-300 ç§’ï¼ˆå–å†³äºä»“åº“å¤§å°ï¼‰
   - API è¯·æ±‚è¶…æ—¶ï¼š10-30 ç§’
   - é¡¹ç›®æ€»è¶…æ—¶ï¼šæ ¹æ®ä»“åº“å¤§å°åŠ¨æ€è°ƒæ•´

#### é™æµæ§åˆ¶

**API é™æµ**ï¼š

```
é™åˆ¶ï¼š
  â€¢ GitLab.com: 600 è¯·æ±‚/åˆ†é’Ÿ
  â€¢ Self-hosted: å¯é…ç½®

ç­–ç•¥ï¼š
  â€¢ ä»¤ç‰Œæ¡¶ç®—æ³•
  â€¢ æŒ‡æ•°é€€é¿é‡è¯•
  â€¢ åŠ¨æ€è°ƒæ•´è¯·æ±‚é€Ÿç‡
```

**ç½‘ç»œé™æµ**ï¼š

```
é™åˆ¶ï¼š
  â€¢ é¿å…å æ»¡å¸¦å®½
  â€¢ æ§åˆ¶å¹¶å‘ä¸‹è½½æ•°

ç­–ç•¥ï¼š
  â€¢ é™åˆ¶å¹¶å‘ clone/push æ•°é‡
  â€¢ åˆ†æ—¶æ®µæ‰§è¡Œï¼ˆé¿å¼€é«˜å³°ï¼‰
```

---

## ä¸‰ã€å…ƒæ•°æ®åŒæ­¥æ¨¡å—

### 3.1 åŒæ­¥ä¼˜å…ˆçº§

**P0 - Issues**
- æ ‡é¢˜ã€æè¿°ã€çŠ¶æ€
- æ ‡ç­¾ã€é‡Œç¨‹ç¢‘
- åˆ†é…è€…
- è¯„è®ºï¼ˆå«ä½œè€…æ˜ å°„ï¼‰

**P1 - Merge Requests**
- æ ‡é¢˜ã€æè¿°ã€çŠ¶æ€
- æº/ç›®æ ‡åˆ†æ”¯
- å®¡æ‰¹è®°å½•
- è¯„è®ºè®¨è®º
- Diff æ•°æ®

**P2 - Wiki**
- é¡µé¢å†…å®¹
- å†å²ç‰ˆæœ¬

**P3 - å…¶ä»–**
- Snippets
- Labels å®šä¹‰
- Milestones å®šä¹‰
- Project Members

---

### 3.2 ç”¨æˆ·æ˜ å°„æœºåˆ¶

#### é—®é¢˜

æº GitLab ç”¨æˆ·åœ¨ç›®æ ‡ GitLab å¯èƒ½ä¸å­˜åœ¨

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1ï¼šç”¨æˆ·æ˜ å°„è¡¨**

```
é…ç½®æ–‡ä»¶å®šä¹‰æ˜ å°„å…³ç³»ï¼š

user_mapping:
  source_user_id_1: target_user_id_1
  source_username_1: target_username_1

é»˜è®¤æ˜ å°„ï¼š
  - ç›¸åŒç”¨æˆ·åè‡ªåŠ¨æ˜ å°„
  - ä¸å­˜åœ¨åˆ™æ˜ å°„åˆ°ç®¡ç†å‘˜
  - æˆ–åˆ›å»ºå ä½ç”¨æˆ·ï¼ˆå¦‚ "å¼ ä¸‰ï¼ˆå·²ç¦»èŒï¼‰"ï¼‰
```

**æ–¹æ¡ˆ 2ï¼šé‚®ç®±åŒ¹é…**

```
é€šè¿‡é‚®ç®±åŒ¹é…ç”¨æˆ·ï¼š
  1. è·å–æºç”¨æˆ·é‚®ç®±
  2. åœ¨ç›®æ ‡æŸ¥æ‰¾ç›¸åŒé‚®ç®±ç”¨æˆ·
  3. åŒ¹é…æˆåŠŸåˆ™æ˜ å°„
  4. å¤±è´¥åˆ™é™çº§åˆ°æ–¹æ¡ˆ 1
```

**æ–¹æ¡ˆ 3ï¼šæåŠè½¬æ¢**

```
è¯„è®ºä¸­çš„ @username å¤„ç†ï¼š
  - æˆåŠŸæ˜ å°„ï¼šä¿æŒ @username
  - å¤±è´¥æ˜ å°„ï¼šè½¬æ¢ä¸ºçº¯æ–‡æœ¬ "[@username]"
```

---

### 3.3 Issues åŒæ­¥æµç¨‹

```
1. è·å–æº Issues åˆ—è¡¨
   â”œâ”€ åˆ†é¡µè·å–ï¼ˆé¿å…è¶…æ—¶ï¼‰
   â”œâ”€ è¿‡æ»¤è§„åˆ™ï¼ˆçŠ¶æ€ã€æ ‡ç­¾ç­‰ï¼‰
   â””â”€ æŒ‰åˆ›å»ºæ—¶é—´æ’åº

2. é¢„å¤„ç†
   â”œâ”€ ç”¨æˆ·æ˜ å°„
   â”œâ”€ æ ‡ç­¾æ˜ å°„ï¼ˆå…ˆåŒæ­¥æ ‡ç­¾å®šä¹‰ï¼‰
   â””â”€ é‡Œç¨‹ç¢‘æ˜ å°„

3. åˆ›å»º Issue
   â”œâ”€ é€šè¿‡ API åˆ›å»ºåŸºç¡€ Issue
   â”œâ”€ è®¾ç½®æ ‡é¢˜ã€æè¿°ã€çŠ¶æ€
   â”œâ”€ è®¾ç½®æ ‡ç­¾ã€é‡Œç¨‹ç¢‘ã€åˆ†é…è€…
   â””â”€ ä¿ç•™ Issue ID æ˜ å°„å…³ç³»

4. åŒæ­¥è¯„è®º
   â”œâ”€ è·å–æº Issue è¯„è®ºåˆ—è¡¨
   â”œâ”€ ç”¨æˆ·æ˜ å°„
   â”œâ”€ åœ¨ç›®æ ‡ Issue æ·»åŠ è¯„è®º
   â”‚  â€¢ ä¿æŒæ—¶é—´é¡ºåº
   â”‚  â€¢ æ ‡æ³¨åŸä½œè€…ï¼ˆå¦‚æ˜ å°„å¤±è´¥ï¼‰
   â””â”€ å¤„ç†è¯„è®ºä¸­çš„å¼•ç”¨ï¼ˆ@userã€#issueï¼‰

5. éªŒè¯
   â”œâ”€ å¯¹æ¯” Issue æ•°é‡
   â”œâ”€ æŠ½æ ·æ£€æŸ¥å†…å®¹å®Œæ•´æ€§
   â””â”€ è®°å½•å¤±è´¥é¡¹
```

---

### 3.4 Merge Requests åŒæ­¥æµç¨‹

```
1. è·å–æº MR åˆ—è¡¨
   â”œâ”€ åˆ†é¡µè·å–
   â”œâ”€ è¿‡æ»¤è§„åˆ™ï¼ˆçŠ¶æ€ã€ç›®æ ‡åˆ†æ”¯ç­‰ï¼‰
   â””â”€ æŒ‰åˆ›å»ºæ—¶é—´æ’åº

2. æ£€æŸ¥å‰ç½®æ¡ä»¶
   â”œâ”€ ç¡®è®¤ Git ä»“åº“å·²åŒæ­¥
   â”œâ”€ ç¡®è®¤æº/ç›®æ ‡åˆ†æ”¯å­˜åœ¨
   â””â”€ ç”¨æˆ·æ˜ å°„

3. åˆ›å»º MR
   â”œâ”€ é€šè¿‡ API åˆ›å»º MR
   â”œâ”€ è®¾ç½®æ ‡é¢˜ã€æè¿°
   â”œâ”€ è®¾ç½®æºåˆ†æ”¯ã€ç›®æ ‡åˆ†æ”¯
   â”œâ”€ è®¾ç½®çŠ¶æ€ï¼ˆOpen/Merged/Closedï¼‰
   â””â”€ ä¿ç•™ MR ID æ˜ å°„å…³ç³»

4. åŒæ­¥å®¡æ‰¹è®°å½•
   â”œâ”€ è·å–å®¡æ‰¹äººåˆ—è¡¨
   â”œâ”€ ç”¨æˆ·æ˜ å°„
   â””â”€ è®¾ç½®å®¡æ‰¹çŠ¶æ€ï¼ˆå·²æ‰¹å‡†/å·²æ‹’ç»ï¼‰

5. åŒæ­¥è¯„è®ºå’Œè®¨è®º
   â”œâ”€ è·å–è®¨è®ºåˆ—è¡¨
   â”œâ”€ åŒºåˆ†ï¼šæ™®é€šè¯„è®º vs Diff è¯„è®º
   â”œâ”€ ç”¨æˆ·æ˜ å°„
   â””â”€ åˆ›å»ºè¯„è®º
      â€¢ æ™®é€šè¯„è®ºï¼šç›´æ¥åˆ›å»º
      â€¢ Diff è¯„è®ºï¼šå°è¯•å…³è”ä»£ç ä½ç½®

6. å¤„ç†åˆå¹¶çŠ¶æ€
   â”œâ”€ å¦‚æœå·²åˆå¹¶
   â”‚  â€¢ è®°å½•åˆå¹¶ä¿¡æ¯
   â”‚  â€¢ ä¸å®é™…æ‰§è¡Œ mergeï¼ˆé¿å…ä¿®æ”¹ Git å†å²ï¼‰
   â””â”€ ä¿æŒçŠ¶æ€ä¸º Merged

7. éªŒè¯
   â”œâ”€ å¯¹æ¯” MR æ•°é‡
   â”œâ”€ æ£€æŸ¥çŠ¶æ€ä¸€è‡´æ€§
   â””â”€ è®°å½•å¤±è´¥é¡¹
```

---

## å››ã€é…ç½®ç®¡ç†

### 4.1 é…ç½®æ–‡ä»¶ç»“æ„

**æ–‡ä»¶æ ¼å¼**ï¼šYAML

**é…ç½®å±‚çº§**ï¼š

```
å…¨å±€é…ç½®
â”œâ”€ æº GitLab è¿æ¥
â”œâ”€ ç›®æ ‡ GitLab è¿æ¥
â”œâ”€ Git åŒæ­¥ç­–ç•¥é€‰æ‹©
â”œâ”€ å¹¶å‘æ§åˆ¶å‚æ•°
â””â”€ æ—¥å¿—é…ç½®

åŒæ­¥è§„åˆ™
â”œâ”€ åˆ†ç»„è¿‡æ»¤
â”‚  â€¢ ç™½åå•
â”‚  â€¢ é»‘åå•
â”‚  â€¢ æ­£åˆ™è¡¨è¾¾å¼
â”œâ”€ é¡¹ç›®è¿‡æ»¤
â””â”€ æ•°æ®ç±»å‹é€‰æ‹©
   â€¢ Git ä»“åº“
   â€¢ Issues
   â€¢ Merge Requests
   â€¢ Wiki
   â€¢ ç­‰

ç”¨æˆ·æ˜ å°„
â”œâ”€ æ˜ å°„è¡¨
â””â”€ é»˜è®¤ç­–ç•¥

é«˜çº§é€‰é¡¹
â”œâ”€ æ–­ç‚¹ç»­ä¼ 
â”œâ”€ å¢é‡åŒæ­¥
â””â”€ é”™è¯¯å¤„ç†ç­–ç•¥
```

**é…ç½®ç¤ºä¾‹ç»“æ„**ï¼š

```
è¿æ¥é…ç½®ï¼š
  - æº URLã€Token
  - ç›®æ ‡ URLã€Token
  - è¶…æ—¶è®¾ç½®

åŒæ­¥ç­–ç•¥ï¼š
  - Git ç­–ç•¥ï¼špush_mirror / clone_push / hybrid
  - æ•°æ®èŒƒå›´ï¼šgit_only / with_issues / with_mr / full

è¿‡æ»¤è§„åˆ™ï¼š
  - åŒ…å«ï¼šgroup/*, specific-project
  - æ’é™¤ï¼šarchived/*, test-*
  - æ­£åˆ™ï¼š^prod-.*

å¹¶å‘é…ç½®ï¼š
  - æœ€å¤§å¹¶å‘æ•°
  - é˜Ÿåˆ—å¤§å°
  - è¶…æ—¶æ—¶é—´

ç”¨æˆ·æ˜ å°„ï¼š
  - æ˜ å°„è¡¨æ–‡ä»¶è·¯å¾„
  - æœªåŒ¹é…ç­–ç•¥ï¼šadmin / placeholder / skip

æ—¥å¿—é…ç½®ï¼š
  - çº§åˆ«ï¼šDEBUG / INFO / WARN / ERROR
  - è¾“å‡ºï¼šconsole / file / both
  - æ–‡ä»¶è·¯å¾„
```

---

### 4.2 é…ç½®éªŒè¯

**éªŒè¯æµç¨‹**ï¼š

```
1. æ ¼å¼éªŒè¯
   â”œâ”€ YAML è¯­æ³•æ­£ç¡®æ€§
   â”œâ”€ å¿…å¡«å­—æ®µå®Œæ•´æ€§
   â””â”€ å­—æ®µç±»å‹æ­£ç¡®æ€§

2. è¿æ¥éªŒè¯
   â”œâ”€ æº GitLab è¿æ¥æµ‹è¯•
   â”‚  â€¢ URL å¯è®¿é—®
   â”‚  â€¢ Token æœ‰æ•ˆ
   â”‚  â€¢ æƒé™å……è¶³ï¼ˆAPIã€read_repositoryï¼‰
   â”œâ”€ ç›®æ ‡ GitLab è¿æ¥æµ‹è¯•
   â”‚  â€¢ URL å¯è®¿é—®
   â”‚  â€¢ Token æœ‰æ•ˆ
   â”‚  â€¢ æƒé™å……è¶³ï¼ˆAPIã€write_repositoryã€create_projectï¼‰
   â””â”€ ç½‘ç»œè¿é€šæ€§

3. é€»è¾‘éªŒè¯
   â”œâ”€ è¿‡æ»¤è§„åˆ™ä¸å†²çª
   â”œâ”€ ç”¨æˆ·æ˜ å°„æ–‡ä»¶å­˜åœ¨
   â””â”€ ç­–ç•¥é€‰æ‹©åˆç†æ€§
      â€¢ é€‰æ‹© push_mirror ä½†æ— æºæƒé™ â†’ è­¦å‘Š

4. èµ„æºéªŒè¯
   â”œâ”€ ç£ç›˜ç©ºé—´å……è¶³ï¼ˆClone & Push ç­–ç•¥ï¼‰
   â””â”€ å¹¶å‘æ•°åˆç†ï¼ˆä¸è¶…è¿‡ç³»ç»Ÿé™åˆ¶ï¼‰
```

---

## äº”ã€ç›‘æ§ä¸æ—¥å¿—

### 5.1 è¿›åº¦ç›‘æ§

**å®æ—¶æŒ‡æ ‡**ï¼š

```
æ€»ä½“è¿›åº¦ï¼š
â”œâ”€ æ€»ä»»åŠ¡æ•°
â”œâ”€ å·²å®Œæˆæ•°
â”œâ”€ è¿›è¡Œä¸­æ•°
â”œâ”€ å¤±è´¥æ•°
â”œâ”€ è·³è¿‡æ•°
â””â”€ é¢„è®¡å‰©ä½™æ—¶é—´

å½“å‰ä»»åŠ¡ï¼š
â”œâ”€ å½“å‰åŒæ­¥çš„é¡¹ç›®è·¯å¾„
â”œâ”€ åŒæ­¥ç­–ç•¥
â”œâ”€ å½“å‰é˜¶æ®µï¼ˆå…‹éš†/æ¨é€/éªŒè¯ï¼‰
â””â”€ å½“å‰è¿›åº¦ç™¾åˆ†æ¯”

æ€§èƒ½æŒ‡æ ‡ï¼š
â”œâ”€ å¹³å‡ä»»åŠ¡è€—æ—¶
â”œâ”€ ç½‘ç»œååé‡
â””â”€ æˆåŠŸç‡
```

**è¾“å‡ºæ–¹å¼**ï¼š

```
æ–¹å¼ 1ï¼šæ§åˆ¶å°è¾“å‡º
  â€¢ è¿›åº¦æ¡
  â€¢ æ»šåŠ¨æ—¥å¿—
  â€¢ å®æ—¶ç»Ÿè®¡

æ–¹å¼ 2ï¼šæ–‡ä»¶è¾“å‡º
  â€¢ è¯¦ç»†æ—¥å¿—æ–‡ä»¶
  â€¢ JSON è¿›åº¦æ–‡ä»¶ï¼ˆä¾›å¤–éƒ¨è¯»å–ï¼‰

æ–¹å¼ 3ï¼šAPI æ¥å£ï¼ˆæœåŠ¡æ¨¡å¼ï¼‰
  â€¢ HTTP API æŸ¥è¯¢è¿›åº¦
  â€¢ WebSocket å®æ—¶æ¨é€
```

---

### 5.1A æ€§èƒ½åˆ†ææ—¥å¿—è®¾è®¡

**ç›®æ ‡**ï¼šé€šè¿‡ç»“æ„åŒ–æ—¥å¿—è®°å½•æ¯ä¸ªåŒæ­¥æ­¥éª¤çš„è€—æ—¶ï¼Œä¾¿äºåç»­æ€§èƒ½ä¼˜åŒ–ã€‚

#### æ—¥å¿—è®°å½•ç²’åº¦

**çº§åˆ« 1ï¼šä»»åŠ¡çº§è€—æ—¶**ï¼ˆå¿…éœ€ï¼‰
```
ä»»åŠ¡å¼€å§‹/ç»“æŸæ—¥å¿—ï¼š
â”œâ”€ ä»»åŠ¡ ID
â”œâ”€ é¡¹ç›®è·¯å¾„
â”œâ”€ å¼€å§‹æ—¶é—´æˆ³ï¼ˆISO 8601ï¼‰
â”œâ”€ ç»“æŸæ—¶é—´æˆ³
â”œâ”€ æ€»è€—æ—¶ï¼ˆç§’ï¼‰
â””â”€ ä»»åŠ¡çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥/è·³è¿‡ï¼‰
```

**çº§åˆ« 2ï¼šé˜¶æ®µçº§è€—æ—¶**ï¼ˆå¿…éœ€ï¼‰
```
æ¯ä¸ªä¸»è¦é˜¶æ®µè®°å½•ï¼š
â”œâ”€ åˆå§‹åŒ–é˜¶æ®µ
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ æ“ä½œï¼šæ£€æŸ¥ç›®æ ‡é¡¹ç›®ã€å‡†å¤‡ç¯å¢ƒ
â”œâ”€ Git åŒæ­¥é˜¶æ®µ
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ å­é˜¶æ®µï¼ˆè§ä¸‹ï¼‰
â”œâ”€ å…ƒæ•°æ®åŒæ­¥é˜¶æ®µ
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ å­é˜¶æ®µï¼ˆIssues/MRï¼‰
â”œâ”€ éªŒè¯é˜¶æ®µ
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ éªŒè¯å†…å®¹
â””â”€ æ¸…ç†é˜¶æ®µ
   â”œâ”€ å¼€å§‹æ—¶é—´
   â””â”€ è€—æ—¶
```

**çº§åˆ« 3ï¼šæ“ä½œçº§è€—æ—¶**ï¼ˆè¯¦ç»†æ¨¡å¼ï¼‰
```
Git åŒæ­¥å­é˜¶æ®µï¼ˆClone & Push ç­–ç•¥ï¼‰ï¼š
â”œâ”€ æœ¬åœ°ä»“åº“æ£€æŸ¥ï¼ˆé¦–æ¬¡ vs å¢é‡ï¼‰
â”‚  â”œâ”€ æ“ä½œï¼šæ£€æŸ¥ ~/.gitlab-sync/repos/<id>
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ ç»“æœï¼šå­˜åœ¨/ä¸å­˜åœ¨/æŸå
â”œâ”€ Git å…‹éš†/æ‹‰å–
â”‚  â”œâ”€ æ“ä½œï¼šgit clone --mirror æˆ– git fetch
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â”œâ”€ æ•°æ®é‡ï¼ˆå­—èŠ‚ï¼‰
â”‚  â””â”€ é€Ÿåº¦ï¼ˆMB/sï¼‰
â”œâ”€ å®Œæ•´æ€§æ£€æŸ¥
â”‚  â”œâ”€ æ“ä½œï¼šgit fsck --quick
â”‚  â”œâ”€ è€—æ—¶
â”‚  â””â”€ ç»“æœï¼šé€šè¿‡/å¤±è´¥
â”œâ”€ Git æ¨é€
â”‚  â”œâ”€ æ“ä½œï¼šgit push --mirror
â”‚  â”œâ”€ å¼€å§‹æ—¶é—´
â”‚  â”œâ”€ è€—æ—¶
â”‚  â”œâ”€ æ•°æ®é‡ï¼ˆå­—èŠ‚ï¼‰
â”‚  â””â”€ é€Ÿåº¦ï¼ˆMB/sï¼‰
â”œâ”€ LFS å¯¹è±¡å¤„ç†ï¼ˆå¦‚æœ‰ï¼‰
â”‚  â”œâ”€ LFS fetch è€—æ—¶
â”‚  â”œâ”€ LFS push è€—æ—¶
â”‚  â””â”€ LFS å¯¹è±¡æ•°é‡
â””â”€ åéªŒè¯
   â”œâ”€ åˆ†æ”¯/æ ‡ç­¾ SHA å¯¹æ¯”
   â”œâ”€ è€—æ—¶
   â””â”€ ç»“æœï¼šä¸€è‡´/ä¸ä¸€è‡´

å…ƒæ•°æ®åŒæ­¥å­é˜¶æ®µï¼š
â”œâ”€ Issues åŒæ­¥
â”‚  â”œâ”€ è·å–æº Issues è€—æ—¶
â”‚  â”œâ”€ åˆ›å»º Issues è€—æ—¶
â”‚  â”œâ”€ åŒæ­¥è¯„è®ºè€—æ—¶
â”‚  â””â”€ Issues æ€»æ•°
â”œâ”€ MR åŒæ­¥
â”‚  â”œâ”€ è·å–æº MR è€—æ—¶
â”‚  â”œâ”€ åˆ›å»º MR è€—æ—¶
â”‚  â”œâ”€ åŒæ­¥è¯„è®ºè€—æ—¶
â”‚  â””â”€ MR æ€»æ•°
â””â”€ Wiki åŒæ­¥
   â”œâ”€ å…‹éš† Wiki è€—æ—¶
   â””â”€ æ¨é€ Wiki è€—æ—¶
```

#### ç»“æ„åŒ–æ—¥å¿—æ ¼å¼

**JSON æ ¼å¼ç¤ºä¾‹**ï¼ˆæ¨èç”¨äºåˆ†æï¼‰ï¼š

```json
{
  "timestamp": "2025-12-13T10:00:00.000Z",
  "level": "INFO",
  "event_type": "task_started",
  "task_id": "sync-12345-20251213-100000",
  "project": {
    "id": 12345,
    "path": "group/subgroup/project",
    "source_url": "https://source.gitlab.com/group/subgroup/project"
  },
  "strategy": "clone_push",
  "sync_mode": "incremental"
}

{
  "timestamp": "2025-12-13T10:00:05.123Z",
  "level": "DEBUG",
  "event_type": "stage_started",
  "task_id": "sync-12345-20251213-100000",
  "stage": "git_sync",
  "sub_stage": "git_fetch",
  "operation": "git fetch origin --prune --tags"
}

{
  "timestamp": "2025-12-13T10:00:35.456Z",
  "level": "DEBUG",
  "event_type": "stage_completed",
  "task_id": "sync-12345-20251213-100000",
  "stage": "git_sync",
  "sub_stage": "git_fetch",
  "duration_ms": 30333,
  "duration_seconds": 30.333,
  "metrics": {
    "bytes_transferred": 52428800,
    "speed_mbps": 1.65,
    "objects_received": 1523,
    "refs_updated": 5
  },
  "result": "success"
}

{
  "timestamp": "2025-12-13T10:00:40.789Z",
  "level": "DEBUG",
  "event_type": "stage_started",
  "task_id": "sync-12345-20251213-100000",
  "stage": "git_sync",
  "sub_stage": "git_push",
  "operation": "git push --mirror target"
}

{
  "timestamp": "2025-12-13T10:01:10.123Z",
  "level": "DEBUG",
  "event_type": "stage_completed",
  "task_id": "sync-12345-20251213-100000",
  "stage": "git_sync",
  "sub_stage": "git_push",
  "duration_ms": 29334,
  "duration_seconds": 29.334,
  "metrics": {
    "bytes_transferred": 5242880,
    "speed_mbps": 1.43,
    "refs_pushed": 5
  },
  "result": "success"
}

{
  "timestamp": "2025-12-13T10:01:15.567Z",
  "level": "INFO",
  "event_type": "task_completed",
  "task_id": "sync-12345-20251213-100000",
  "project": {
    "id": 12345,
    "path": "group/subgroup/project"
  },
  "duration_ms": 75567,
  "duration_seconds": 75.567,
  "stages": {
    "initialization": {
      "duration_ms": 1000,
      "result": "success"
    },
    "git_sync": {
      "duration_ms": 65000,
      "sub_stages": {
        "repo_check": {"duration_ms": 200},
        "git_fetch": {"duration_ms": 30333},
        "git_fsck": {"duration_ms": 5000},
        "git_push": {"duration_ms": 29334},
        "verification": {"duration_ms": 133}
      },
      "result": "success"
    },
    "metadata_sync": {
      "duration_ms": 8000,
      "sub_stages": {
        "issues": {"duration_ms": 5000, "count": 25},
        "merge_requests": {"duration_ms": 3000, "count": 8}
      },
      "result": "success"
    },
    "validation": {
      "duration_ms": 1000,
      "result": "success"
    },
    "cleanup": {
      "duration_ms": 567,
      "result": "success"
    }
  },
  "metrics": {
    "total_bytes_transferred": 57671680,
    "branches_synced": 5,
    "tags_synced": 3,
    "commits_synced": 1523,
    "issues_synced": 25,
    "mrs_synced": 8
  },
  "result": "success"
}
```

#### æ€§èƒ½åˆ†æå·¥å…·æ”¯æŒ

**æ—¥å¿—å¯¼å‡ºä¸åˆ†æ**ï¼š

```
åŠŸèƒ½ 1ï¼šè€—æ—¶ç»Ÿè®¡æŠ¥å‘Š
  â€¢ æŒ‰é˜¶æ®µèšåˆè€—æ—¶
  â€¢ è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
  â€¢ è¾“å‡ºæ ¼å¼ï¼š
    - æ–‡æœ¬è¡¨æ ¼
    - CSVï¼ˆå¯¼å…¥ Excelï¼‰
    - JSONï¼ˆç¨‹åºåŒ–åˆ†æï¼‰

åŠŸèƒ½ 2ï¼šæ€§èƒ½è¶‹åŠ¿åˆ†æ
  â€¢ è·¨å¤šæ¬¡åŒæ­¥å¯¹æ¯”
  â€¢ è¯†åˆ«æ€§èƒ½é€€åŒ–
  â€¢ æŒ‰é¡¹ç›®å¤§å°åˆ†ç»„ç»Ÿè®¡

åŠŸèƒ½ 3ï¼šç“¶é¢ˆè¯†åˆ«
  â€¢ è‡ªåŠ¨è¯†åˆ«è€—æ—¶æœ€é•¿çš„é˜¶æ®µ
  â€¢ æŒ‰ä»“åº“å¤§å°å½’ä¸€åŒ–å¯¹æ¯”
  â€¢ è¾“å‡ºä¼˜åŒ–å»ºè®®

ç¤ºä¾‹å‘½ä»¤ï¼š
  gitlab-sync analyze-performance \
    --log-file sync-2025-12-13.json \
    --output performance-report.txt \
    --format table

  gitlab-sync analyze-performance \
    --log-dir ./logs \
    --date-range 2025-12-01:2025-12-13 \
    --output trend-analysis.csv
```

**å®æ—¶æ€§èƒ½ä»ªè¡¨ç›˜**ï¼ˆæœåŠ¡æ¨¡å¼ï¼‰ï¼š

```
å¯è§†åŒ–æŒ‡æ ‡ï¼š
â”œâ”€ å®æ—¶è€—æ—¶åˆ†å¸ƒï¼ˆå„é˜¶æ®µå æ¯”é¥¼å›¾ï¼‰
â”œâ”€ å†å²è¶‹åŠ¿å›¾ï¼ˆæŒ‰æ—¥æœŸï¼‰
â”œâ”€ æ…¢æŸ¥è¯¢åˆ—è¡¨ï¼ˆTop 10 æœ€æ…¢é¡¹ç›®ï¼‰
â”œâ”€ ååé‡å›¾è¡¨ï¼ˆé¡¹ç›®æ•°/å°æ—¶ï¼‰
â””â”€ é”™è¯¯ç‡è¶‹åŠ¿

è®¿é—®æ–¹å¼ï¼š
  â€¢ Web UI: http://localhost:8080/dashboard
  â€¢ API: http://localhost:8080/api/metrics
```

---

### 5.1B åŒæ­¥çŠ¶æ€ç›‘æ§

**ç›®æ ‡**ï¼šæä¾›æ¸…æ™°çš„åŒæ­¥çŠ¶æ€è§†å›¾ï¼Œä¾¿äºæŸ¥çœ‹æ¯ä¸ªä»“åº“çš„åŒæ­¥æƒ…å†µå’Œå·®å¼‚ã€‚

#### åŒæ­¥çŠ¶æ€æ•°æ®æ¨¡å‹

**é¡¹ç›®çŠ¶æ€è¡¨**ï¼ˆå­˜å‚¨ä¸º SQLite/PostgreSQL æˆ– JSON æ–‡ä»¶ï¼‰ï¼š

```sql
CREATE TABLE sync_status (
  -- åŸºç¡€ä¿¡æ¯
  project_id INTEGER PRIMARY KEY,
  project_path TEXT NOT NULL,
  project_name TEXT,

  -- æºä¿¡æ¯
  source_url TEXT,
  source_default_branch TEXT,
  source_last_commit_sha TEXT,
  source_last_commit_time TIMESTAMP,
  source_last_commit_author TEXT,
  source_branches_count INTEGER,
  source_tags_count INTEGER,

  -- ç›®æ ‡ä¿¡æ¯
  target_url TEXT,
  target_default_branch TEXT,
  target_last_commit_sha TEXT,
  target_last_commit_time TIMESTAMP,
  target_branches_count INTEGER,
  target_tags_count INTEGER,

  -- åŒæ­¥çŠ¶æ€
  sync_status TEXT, -- 'synced', 'pending', 'failed', 'diverged', 'never_synced'
  last_sync_time TIMESTAMP,
  last_sync_task_id TEXT,
  last_sync_duration_seconds REAL,
  last_sync_strategy TEXT, -- 'clone_push', 'push_mirror', etc.
  last_sync_result TEXT, -- 'success', 'partial', 'failed'
  last_sync_error TEXT,

  -- å·®å¼‚æ£€æµ‹
  is_consistent BOOLEAN, -- true/false
  diff_summary TEXT, -- JSON æ ¼å¼çš„å·®å¼‚æ‘˜è¦
  missing_branches_in_target TEXT, -- JSON æ•°ç»„
  extra_branches_in_target TEXT,
  diverged_branches TEXT, -- JSON å¯¹è±¡ {branch: {source_sha, target_sha}}
  missing_tags_in_target TEXT,
  extra_tags_in_target TEXT,

  -- ç»Ÿè®¡ä¿¡æ¯
  total_sync_count INTEGER DEFAULT 0,
  success_sync_count INTEGER DEFAULT 0,
  failed_sync_count INTEGER DEFAULT 0,
  first_sync_time TIMESTAMP,

  -- å…ƒæ•°æ®åŒæ­¥ï¼ˆå¦‚å¯ç”¨ï¼‰
  issues_synced INTEGER,
  mrs_synced INTEGER,
  wiki_synced BOOLEAN,

  -- æ—¶é—´æˆ³
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_sync_status ON sync_status(sync_status);
CREATE INDEX idx_is_consistent ON sync_status(is_consistent);
CREATE INDEX idx_last_sync_time ON sync_status(last_sync_time);
```

**å·®å¼‚æ‘˜è¦ JSON æ ¼å¼**ï¼š

```json
{
  "consistent": false,
  "diff_type": "diverged",
  "details": {
    "branches": {
      "total_source": 10,
      "total_target": 9,
      "missing_in_target": ["feature/new-feature"],
      "extra_in_target": [],
      "diverged": {
        "main": {
          "source_sha": "abc123...",
          "target_sha": "def456...",
          "source_commit_time": "2025-12-13T10:00:00Z",
          "target_commit_time": "2025-12-12T15:00:00Z"
        }
      }
    },
    "tags": {
      "total_source": 5,
      "total_target": 5,
      "missing_in_target": [],
      "extra_in_target": [],
      "diverged": {}
    },
    "metadata": {
      "issues": {
        "source_count": 25,
        "target_count": 25,
        "consistent": true
      },
      "merge_requests": {
        "source_count": 8,
        "target_count": 7,
        "consistent": false
      }
    }
  },
  "last_check_time": "2025-12-13T12:00:00Z"
}
```

#### çŠ¶æ€æŸ¥è¯¢æ¥å£

**CLI å‘½ä»¤**ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰é¡¹ç›®åŒæ­¥çŠ¶æ€
gitlab-sync status

# æŸ¥çœ‹ç‰¹å®šé¡¹ç›®çŠ¶æ€
gitlab-sync status group/subgroup/project

# æŸ¥çœ‹æœ‰å·®å¼‚çš„é¡¹ç›®
gitlab-sync status --filter diverged

# æŸ¥çœ‹å¤±è´¥çš„åŒæ­¥ä»»åŠ¡
gitlab-sync status --filter failed

# è¯¦ç»†å·®å¼‚æŠ¥å‘Š
gitlab-sync diff group/subgroup/project

# å¯¼å‡ºçŠ¶æ€æŠ¥å‘Š
gitlab-sync status --output status-report.json --format json
```

**CLI è¾“å‡ºç¤ºä¾‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitLab Sync Status Overview                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Projects: 150                                                        â”‚
â”‚ âœ… Synced & Consistent: 142 (94.7%)                                        â”‚
â”‚ âš ï¸  Diverged: 3 (2.0%)                                                     â”‚
â”‚ âŒ Failed: 4 (2.7%)                                                        â”‚
â”‚ â³ Pending: 1 (0.7%)                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Recent Syncs (Last 24h):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Project                        â”‚ Status     â”‚ Last Sync Time  â”‚ Duration â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ group/project-a                â”‚ âœ… Synced  â”‚ 2025-12-13 10:00â”‚ 45s      â”‚
â”‚ group/project-b                â”‚ âœ… Synced  â”‚ 2025-12-13 09:55â”‚ 120s     â”‚
â”‚ group/project-c                â”‚ âš ï¸ Divergedâ”‚ 2025-12-13 09:50â”‚ 30s      â”‚
â”‚ group/project-d                â”‚ âŒ Failed  â”‚ 2025-12-13 09:45â”‚ 10s      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Diverged Projects (Require Attention):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Project                        â”‚ Diff Summary                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ group/project-c                â”‚ â€¢ Branch 'main' SHA mismatch            â”‚
â”‚                                â”‚ â€¢ Missing branch: feature/new-feature   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use 'gitlab-sync diff <project>' for detailed diff information.
```

**è¯¦ç»†å·®å¼‚è¾“å‡º**ï¼š

```bash
$ gitlab-sync diff group/project-c

================================================================================
Sync Diff Report: group/project-c
================================================================================

Source:  https://source.gitlab.com/group/project-c
Target:  https://target.gitlab.com/group/project-c

Last Sync: 2025-12-13 09:50:00 (2 hours ago)
Last Sync Duration: 30s
Last Sync Result: Success (but diverged after sync)

Overall Status: âš ï¸ DIVERGED

--------------------------------------------------------------------------------
Git Repository Diff
--------------------------------------------------------------------------------

Branches:
  Total: 10 (source) vs 9 (target)

  âœ… Consistent Branches (8):
    â€¢ develop      (SHA: abc123...)
    â€¢ staging      (SHA: def456...)
    â€¢ release/v1.0 (SHA: ghi789...)
    ... (5 more)

  âš ï¸ Diverged Branches (1):
    â€¢ main
      Source SHA:  abc123def456... (committed 2025-12-13 10:00:00 by John Doe)
      Target SHA:  def456abc789... (committed 2025-12-12 15:00:00 by Jane Smith)
      Divergence:  5 commits ahead in source

  âŒ Missing in Target (1):
    â€¢ feature/new-feature (SHA: jkl012...)

  â• Extra in Target (0):
    (none)

Tags:
  Total: 5 (source) vs 5 (target)
  âœ… All tags consistent

--------------------------------------------------------------------------------
Metadata Diff (if enabled)
--------------------------------------------------------------------------------

Issues:
  âœ… Consistent: 25 in source, 25 in target

Merge Requests:
  âš ï¸ Inconsistent: 8 in source, 7 in target
  Missing in target: !15 "Add new feature"

--------------------------------------------------------------------------------
Recommendation
--------------------------------------------------------------------------------

The repository has diverged since last sync. Possible causes:
1. Direct push to target repository (not recommended)
2. Source repository force push after sync
3. Sync was interrupted

Recommended actions:
1. Verify no one is pushing directly to target
2. Re-run sync: gitlab-sync run --project group/project-c
3. If issue persists, check sync logs: gitlab-sync logs <task-id>

Use --force flag to force overwrite target with source (CAUTION: destructive)
```

#### Web UI ç›‘æ§ç•Œé¢ï¼ˆæœåŠ¡æ¨¡å¼ï¼‰

**é¡µé¢ç»“æ„**ï¼š

```
Dashboard (/)
â”œâ”€ Overview
â”‚  â”œâ”€ æ€»ä½“ç»Ÿè®¡å¡ç‰‡ï¼ˆæ€»é¡¹ç›®æ•°ã€åŒæ­¥çŠ¶æ€åˆ†å¸ƒï¼‰
â”‚  â”œâ”€ æœ€è¿‘åŒæ­¥åˆ—è¡¨ï¼ˆæœ€è¿‘ 10 æ¬¡ï¼‰
â”‚  â””â”€ å¥åº·åº¦æŒ‡æ ‡ï¼ˆä¸€è‡´æ€§ç™¾åˆ†æ¯”ï¼‰
â”‚
â”œâ”€ Projects (/projects)
â”‚  â”œâ”€ é¡¹ç›®åˆ—è¡¨ï¼ˆå¯æœç´¢ã€è¿‡æ»¤ã€æ’åºï¼‰
â”‚  â”œâ”€ æ¯è¡Œæ˜¾ç¤ºï¼š
â”‚  â”‚  â€¢ é¡¹ç›®è·¯å¾„
â”‚  â”‚  â€¢ åŒæ­¥çŠ¶æ€ï¼ˆå›¾æ ‡ + é¢œè‰²ï¼‰
â”‚  â”‚  â€¢ æœ€ååŒæ­¥æ—¶é—´
â”‚  â”‚  â€¢ ä¸€è‡´æ€§çŠ¶æ€
â”‚  â”‚  â€¢ æ“ä½œæŒ‰é’®ï¼ˆæŸ¥çœ‹è¯¦æƒ…ã€é‡æ–°åŒæ­¥ã€æŸ¥çœ‹æ—¥å¿—ï¼‰
â”‚  â””â”€ ç­›é€‰å™¨ï¼š
â”‚     â€¢ çŠ¶æ€ï¼šå…¨éƒ¨ / å·²åŒæ­¥ / å¤±è´¥ / åˆ†æ­§ / å¾…åŒæ­¥
â”‚     â€¢ ä¸€è‡´æ€§ï¼šå…¨éƒ¨ / ä¸€è‡´ / ä¸ä¸€è‡´
â”‚     â€¢ åˆ†ç»„ï¼šæŒ‰åˆ†ç»„è·¯å¾„è¿‡æ»¤
â”‚
â”œâ”€ Project Detail (/projects/:id)
â”‚  â”œâ”€ åŸºç¡€ä¿¡æ¯
â”‚  â”‚  â€¢ é¡¹ç›®åç§°ã€è·¯å¾„
â”‚  â”‚  â€¢ æº URLã€ç›®æ ‡ URL
â”‚  â”‚  â€¢ é»˜è®¤åˆ†æ”¯
â”‚  â”œâ”€ Git ä»“åº“çŠ¶æ€
â”‚  â”‚  â€¢ åˆ†æ”¯æ•°é‡å¯¹æ¯”ï¼ˆæº vs ç›®æ ‡ï¼‰
â”‚  â”‚  â€¢ æ ‡ç­¾æ•°é‡å¯¹æ¯”
â”‚  â”‚  â€¢ æœ€åæäº¤ä¿¡æ¯ï¼ˆæ—¶é—´ã€ä½œè€…ã€SHAï¼‰
â”‚  â”‚  â€¢ å·®å¼‚è¯¦æƒ…ï¼ˆå±•å¼€æ˜¾ç¤ºç¼ºå¤±/å¤šä½™/åˆ†æ­§çš„åˆ†æ”¯ï¼‰
â”‚  â”œâ”€ åŒæ­¥å†å²
â”‚  â”‚  â€¢ å†å²åŒæ­¥è®°å½•åˆ—è¡¨
â”‚  â”‚  â€¢ æ¯æ¬¡åŒæ­¥çš„æ—¶é—´ã€è€—æ—¶ã€ç»“æœ
â”‚  â”‚  â€¢ è¶‹åŠ¿å›¾ï¼ˆè€—æ—¶å˜åŒ–ï¼‰
â”‚  â”œâ”€ æ“ä½œ
â”‚  â”‚  â€¢ ç«‹å³åŒæ­¥æŒ‰é’®
â”‚  â”‚  â€¢ æŸ¥çœ‹å®Œæ•´æ—¥å¿—
â”‚  â”‚  â€¢ å¼ºåˆ¶åŒæ­¥ï¼ˆå¸¦ç¡®è®¤ï¼‰
â”‚  â””â”€ å…ƒæ•°æ®çŠ¶æ€ï¼ˆå¦‚å¯ç”¨ï¼‰
â”‚     â€¢ Issues æ•°é‡
â”‚     â€¢ MR æ•°é‡
â”‚     â€¢ Wiki çŠ¶æ€
â”‚
â”œâ”€ Tasks (/tasks)
â”‚  â”œâ”€ åŒæ­¥ä»»åŠ¡åˆ—è¡¨
â”‚  â”œâ”€ æ¯è¡Œæ˜¾ç¤ºï¼š
â”‚  â”‚  â€¢ ä»»åŠ¡ ID
â”‚  â”‚  â€¢ é¡¹ç›®è·¯å¾„
â”‚  â”‚  â€¢ å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€è€—æ—¶
â”‚  â”‚  â€¢ çŠ¶æ€ï¼ˆè¿è¡Œä¸­/æˆåŠŸ/å¤±è´¥ï¼‰
â”‚  â”‚  â€¢ æ“ä½œï¼ˆæŸ¥çœ‹æ—¥å¿—ã€é‡è¯•ï¼‰
â”‚  â””â”€ å®æ—¶æ›´æ–°ï¼ˆWebSocketï¼‰
â”‚
â”œâ”€ Performance (/performance)
â”‚  â”œâ”€ æ€§èƒ½ç»Ÿè®¡å›¾è¡¨
â”‚  â”‚  â€¢ å¹³å‡è€—æ—¶è¶‹åŠ¿ï¼ˆæŒ‰å¤©/å‘¨/æœˆï¼‰
â”‚  â”‚  â€¢ é˜¶æ®µè€—æ—¶åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰
â”‚  â”‚  â€¢ ååé‡å›¾è¡¨ï¼ˆé¡¹ç›®æ•°/å°æ—¶ï¼‰
â”‚  â”œâ”€ æ…¢æŸ¥è¯¢åˆ—è¡¨ï¼ˆTop 20 æœ€æ…¢é¡¹ç›®ï¼‰
â”‚  â””â”€ ç“¶é¢ˆè¯†åˆ«ï¼ˆè‡ªåŠ¨æ ‡æ³¨ï¼‰
â”‚
â””â”€ Settings (/settings)
   â”œâ”€ ç›‘æ§é…ç½®
   â”‚  â€¢ çŠ¶æ€æ£€æŸ¥é¢‘ç‡
   â”‚  â€¢ è‡ªåŠ¨ä¸€è‡´æ€§éªŒè¯å¼€å…³
   â”œâ”€ å‘Šè­¦é…ç½®
   â”‚  â€¢ å¤±è´¥å‘Šè­¦é˜ˆå€¼
   â”‚  â€¢ åˆ†æ­§å‘Šè­¦å¼€å…³
   â””â”€ æ—¥å¿—é…ç½®
      â€¢ æ—¥å¿—çº§åˆ«
      â€¢ æ—¥å¿—ä¿ç•™æ—¶é—´
```

**API æ¥å£**ï¼ˆRESTfulï¼‰ï¼š

```
GET /api/status
  â€¢ è¿”å›æ€»ä½“åŒæ­¥çŠ¶æ€

GET /api/projects
  â€¢ è¿”å›æ‰€æœ‰é¡¹ç›®çŠ¶æ€åˆ—è¡¨
  â€¢ æŸ¥è¯¢å‚æ•°ï¼š
    - status: synced|failed|diverged|pending
    - consistent: true|false
    - page, per_page

GET /api/projects/:id
  â€¢ è¿”å›ç‰¹å®šé¡¹ç›®è¯¦ç»†çŠ¶æ€

GET /api/projects/:id/diff
  â€¢ è¿”å›é¡¹ç›®å·®å¼‚è¯¦æƒ…

POST /api/projects/:id/sync
  â€¢ è§¦å‘é¡¹ç›®åŒæ­¥

GET /api/tasks
  â€¢ è¿”å›åŒæ­¥ä»»åŠ¡åˆ—è¡¨

GET /api/tasks/:task_id
  â€¢ è¿”å›ä»»åŠ¡è¯¦ç»†ä¿¡æ¯

GET /api/tasks/:task_id/logs
  â€¢ è¿”å›ä»»åŠ¡æ—¥å¿—

GET /api/metrics/performance
  â€¢ è¿”å›æ€§èƒ½ç»Ÿè®¡æ•°æ®

WebSocket /ws/tasks
  â€¢ å®æ—¶æ¨é€ä»»åŠ¡çŠ¶æ€æ›´æ–°
```

#### å®šæœŸä¸€è‡´æ€§æ£€æŸ¥

**è‡ªåŠ¨å·¡æ£€æœºåˆ¶**ï¼š

```
åŠŸèƒ½ï¼šå®šæœŸæ£€æŸ¥æ‰€æœ‰é¡¹ç›®çš„ä¸€è‡´æ€§ï¼Œæ›´æ–°çŠ¶æ€æ•°æ®åº“

è§¦å‘æ–¹å¼ï¼š
  â€¢ Cron å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯å°æ—¶ï¼‰
  â€¢ æ‰‹åŠ¨è§¦å‘ï¼šgitlab-sync check-consistency

æ£€æŸ¥æµç¨‹ï¼š
1. éå†æ‰€æœ‰å·²åŒæ­¥é¡¹ç›®
2. å¯¹æ¯ä¸ªé¡¹ç›®æ‰§è¡Œï¼š
   â”œâ”€ è·å–æºä»“åº“ refsï¼ˆgit ls-remoteï¼‰
   â”œâ”€ è·å–ç›®æ ‡ä»“åº“ refs
   â”œâ”€ å¯¹æ¯”åˆ†æ”¯æ•°é‡
   â”œâ”€ å¯¹æ¯”æ ‡ç­¾æ•°é‡
   â”œâ”€ å¯¹æ¯”æ¯ä¸ª ref çš„ SHA
   â”œâ”€ è·å–é»˜è®¤åˆ†æ”¯æœ€åæäº¤ä¿¡æ¯
   â””â”€ æ›´æ–° sync_status è¡¨
3. ç”Ÿæˆä¸€è‡´æ€§æŠ¥å‘Š
4. å¦‚å‘ç°ä¸ä¸€è‡´ï¼Œè§¦å‘å‘Šè­¦ï¼ˆå¯é€‰ï¼‰

æ€§èƒ½ä¼˜åŒ–ï¼š
  â€¢ å¹¶å‘æ£€æŸ¥ï¼ˆæ¯æ¬¡ 10-20 ä¸ªé¡¹ç›®ï¼‰
  â€¢ ä»…æ£€æŸ¥ refsï¼Œä¸æ‹‰å–å®Œæ•´ä»“åº“
  â€¢ ç¼“å­˜ä¸Šæ¬¡æ£€æŸ¥ç»“æœï¼Œä»…å¯¹æ¯”å˜åŒ–

é…ç½®ç¤ºä¾‹ï¼š
check_consistency:
  enabled: true
  schedule: "0 * * * *"  # æ¯å°æ—¶
  concurrency: 10
  timeout_per_project: 30  # ç§’
  alert_on_divergence: true
```

**ä¸€è‡´æ€§æŠ¥å‘Šç¤ºä¾‹**ï¼š

```
================================================================================
Consistency Check Report
================================================================================

Check Time: 2025-12-13 12:00:00
Total Projects Checked: 150
Duration: 5 minutes 23 seconds

Results:
  âœ… Consistent:     142 (94.7%)
  âš ï¸  Diverged:       3 (2.0%)
  âŒ Check Failed:    5 (3.3%)
     (Network timeout or repo unavailable)

Diverged Projects:
  1. group/project-c
     â€¢ Branch 'main' SHA mismatch
     â€¢ Missing branch: feature/new-feature

  2. group/project-x
     â€¢ 2 extra branches in target (manual push?)

  3. group/project-y
     â€¢ Tag 'v1.2.0' SHA mismatch

Recommendations:
  â€¢ Re-sync diverged projects: gitlab-sync run --projects group/project-c,group/project-x,group/project-y
  â€¢ Investigate why target has extra branches in project-x
  â€¢ Review sync logs for failures

Next Check: 2025-12-13 13:00:00
================================================================================
```

---

### 5.2 æ—¥å¿—ç³»ç»Ÿ

**æ—¥å¿—çº§åˆ«**ï¼š

```
DEBUGï¼š
  â€¢ è¯¦ç»† API è°ƒç”¨
  â€¢ Git å‘½ä»¤æ‰§è¡Œ
  â€¢ æ•°æ®å¤„ç†ç»†èŠ‚

INFOï¼š
  â€¢ ä»»åŠ¡å¼€å§‹/å®Œæˆ
  â€¢ é‡è¦é‡Œç¨‹ç¢‘
  â€¢ ç»Ÿè®¡ä¿¡æ¯

WARNï¼š
  â€¢ éè‡´å‘½é”™è¯¯
  â€¢ é™çº§å¤„ç†
  â€¢ æ€§èƒ½å‘Šè­¦

ERRORï¼š
  â€¢ ä»»åŠ¡å¤±è´¥
  â€¢ å¼‚å¸¸ä¿¡æ¯
  â€¢ å †æ ˆè·Ÿè¸ª
```

**æ—¥å¿—æ ¼å¼**ï¼š

```
ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ï¼š
{
  "timestamp": "2025-12-13T12:00:00Z",
  "level": "INFO",
  "module": "git_sync",
  "strategy": "clone_push",
  "project": "group/subgroup/project",
  "message": "Git sync completed",
  "metadata": {
    "duration": 120,
    "branches": 5,
    "tags": 3
  }
}

å¯è¯»æ—¥å¿—ï¼ˆæ–‡æœ¬ï¼‰ï¼š
[2025-12-13 12:00:00] [INFO] [git_sync] Clone & Push: group/subgroup/project - Completed (120s, 5 branches, 3 tags)
```

**æ—¥å¿—å­˜å‚¨**ï¼š

```
æ–‡ä»¶è½®è½¬ï¼š
  â€¢ å•æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆå¦‚ 100MBï¼‰
  â€¢ ä¿ç•™æ•°é‡é™åˆ¶ï¼ˆå¦‚ 10 ä¸ªï¼‰
  â€¢ è‡ªåŠ¨å‹ç¼©æ—§æ—¥å¿—

æ—¥å¿—èšåˆï¼ˆå¯é€‰ï¼‰ï¼š
  â€¢ é›†æˆ ELK/Loki
  â€¢ é›†ä¸­å¼æ—¥å¿—æŸ¥è¯¢
```

---

### 5.3 åŒæ­¥æŠ¥å‘Š

**æŠ¥å‘Šå†…å®¹**ï¼š

```
æ‰§è¡Œæ‘˜è¦ï¼š
â”œâ”€ å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€æ€»è€—æ—¶
â”œâ”€ æˆåŠŸç‡ç»Ÿè®¡
â””â”€ æ•°æ®é‡ç»Ÿè®¡ï¼ˆä»“åº“æ•°ã€åˆ†æ”¯æ•°ã€æäº¤æ•°ï¼‰

è¯¦ç»†ç»“æœï¼š
â”œâ”€ æˆåŠŸåˆ—è¡¨
â”‚  â€¢ åˆ†ç»„ï¼šè·¯å¾„ã€åˆ›å»ºæ—¶é—´
â”‚  â€¢ é¡¹ç›®ï¼šè·¯å¾„ã€åŒæ­¥ç­–ç•¥ã€è€—æ—¶ã€æ•°æ®é‡
â”œâ”€ å¤±è´¥åˆ—è¡¨
â”‚  â€¢ é¡¹ç›®è·¯å¾„
â”‚  â€¢ å¤±è´¥åŸå› 
â”‚  â€¢ é”™è¯¯è¯¦æƒ…
â”‚  â€¢ å»ºè®®è§£å†³æ–¹æ¡ˆ
â””â”€ è·³è¿‡åˆ—è¡¨
   â€¢ é¡¹ç›®è·¯å¾„
   â€¢ è·³è¿‡åŸå› 

æ•°æ®ä¸€è‡´æ€§éªŒè¯ï¼ˆä¸¥æ ¼ï¼‰ï¼š
â”œâ”€ åˆ†ç»„æ•°é‡å¯¹æ¯”ï¼ˆå¿…é¡» 100% ä¸€è‡´ï¼‰
â”œâ”€ é¡¹ç›®æ•°é‡å¯¹æ¯”ï¼ˆå¿…é¡» 100% ä¸€è‡´ï¼‰
â”œâ”€ Git ä»“åº“éªŒè¯ï¼š
â”‚  â€¢ åˆ†æ”¯æ•°é‡å¯¹æ¯”ï¼ˆå¿…é¡» 100% ä¸€è‡´ï¼‰
â”‚  â€¢ æ ‡ç­¾æ•°é‡å¯¹æ¯”ï¼ˆå¿…é¡» 100% ä¸€è‡´ï¼‰
â”‚  â€¢ æ‰€æœ‰åˆ†æ”¯ SHA å¯¹æ¯”ï¼ˆå¿…é¡»å®Œå…¨åŒ¹é…ï¼‰
â”‚  â€¢ æ‰€æœ‰æ ‡ç­¾ SHA å¯¹æ¯”ï¼ˆå¿…é¡»å®Œå…¨åŒ¹é…ï¼‰
â”‚  â€¢ æäº¤æ•°é‡ç»Ÿè®¡
â”‚  â€¢ ä»“åº“å®Œæ•´æ€§æ£€æŸ¥ï¼ˆgit fsckï¼‰
â”œâ”€ å…ƒæ•°æ®æ•°é‡å¯¹æ¯”ï¼ˆå¦‚å¯ç”¨ï¼‰
â”‚  â€¢ Issues æ•°é‡
â”‚  â€¢ MR æ•°é‡
â””â”€ ä¸€è‡´æ€§ç»“è®ºï¼š
   â€¢ âœ… å®Œå…¨ä¸€è‡´ï¼ˆæˆåŠŸï¼‰
   â€¢ âŒ å­˜åœ¨å·®å¼‚ï¼ˆå¤±è´¥ï¼Œéœ€äººå·¥ä»‹å…¥ï¼‰

å»ºè®®ï¼š
â”œâ”€ éœ€è¦æ‰‹åŠ¨å¤„ç†çš„é¡¹ç›®
â”œâ”€ ä¼˜åŒ–å»ºè®®
â””â”€ åç»­æ­¥éª¤
```

**æŠ¥å‘Šæ ¼å¼**ï¼š

```
æ ¼å¼é€‰é¡¹ï¼š
  â€¢ çº¯æ–‡æœ¬ï¼ˆ.txtï¼‰
  â€¢ Markdownï¼ˆ.mdï¼‰
  â€¢ HTMLï¼ˆ.htmlï¼Œå¸¦æ ·å¼ï¼‰
  â€¢ JSONï¼ˆ.jsonï¼Œæœºå™¨å¯è¯»ï¼‰
```

---

## å…­ã€é”™è¯¯å¤„ç†ä¸å®¹é”™

### 6.1 é”™è¯¯åˆ†ç±»

**åˆ†ç±»ä½“ç³»**ï¼š

```
è‡´å‘½é”™è¯¯ï¼ˆFatalï¼‰ï¼š
â”œâ”€ é…ç½®æ–‡ä»¶æ— æ•ˆ
â”œâ”€ æº/ç›®æ ‡ GitLab æ— æ³•è¿æ¥
â”œâ”€ è®¤è¯å¤±è´¥
â””â”€ ç£ç›˜ç©ºé—´è€—å°½

å¯æ¢å¤é”™è¯¯ï¼ˆRecoverableï¼‰ï¼š
â”œâ”€ ç½‘ç»œè¶…æ—¶
â”œâ”€ API é™æµ
â”œâ”€ ä¸´æ—¶æœåŠ¡ä¸å¯ç”¨
â””â”€ å•ä¸ªé¡¹ç›®åŒæ­¥å¤±è´¥

è­¦å‘Šï¼ˆWarningï¼‰ï¼š
â”œâ”€ ç”¨æˆ·æ˜ å°„å¤±è´¥
â”œâ”€ éƒ¨åˆ†æ•°æ®ç¼ºå¤±
â””â”€ æ€§èƒ½é™çº§
```

---

### 6.2 é‡è¯•æœºåˆ¶

**é‡è¯•ç­–ç•¥**ï¼š

```
æŒ‡æ•°é€€é¿ï¼š
  â€¢ ç¬¬ 1 æ¬¡é‡è¯•ï¼šç­‰å¾… 1 ç§’
  â€¢ ç¬¬ 2 æ¬¡é‡è¯•ï¼šç­‰å¾… 2 ç§’
  â€¢ ç¬¬ 3 æ¬¡é‡è¯•ï¼šç­‰å¾… 4 ç§’
  â€¢ ...
  â€¢ æœ€å¤§ç­‰å¾…æ—¶é—´ï¼š60 ç§’
  â€¢ æœ€å¤§é‡è¯•æ¬¡æ•°ï¼š5 æ¬¡

é‡è¯•æ¡ä»¶ï¼š
  â€¢ ç½‘ç»œé”™è¯¯ï¼šé‡è¯•
  â€¢ è¶…æ—¶ï¼šé‡è¯•
  â€¢ 5xx æœåŠ¡å™¨é”™è¯¯ï¼šé‡è¯•
  â€¢ 4xx å®¢æˆ·ç«¯é”™è¯¯ï¼šä¸é‡è¯•ï¼ˆé™¤ 429 é™æµï¼‰
  â€¢ è®¤è¯å¤±è´¥ï¼šä¸é‡è¯•
```

**æ–­ç‚¹ç»­ä¼ **ï¼š

```
çŠ¶æ€ä¿å­˜ï¼š
  â€¢ æ¯å®Œæˆä¸€ä¸ªé¡¹ç›®ä¿å­˜çŠ¶æ€
  â€¢ çŠ¶æ€æ–‡ä»¶åŒ…å«ï¼š
    - å·²å®Œæˆé¡¹ç›®åˆ—è¡¨
    - å¤±è´¥é¡¹ç›®åˆ—è¡¨
    - å½“å‰è¿›åº¦

æ¢å¤æœºåˆ¶ï¼š
  â€¢ å¯åŠ¨æ—¶æ£€æµ‹çŠ¶æ€æ–‡ä»¶
  â€¢ è¯¢é—®ç”¨æˆ·æ˜¯å¦ç»­ä¼ 
  â€¢ è·³è¿‡å·²å®Œæˆé¡¹ç›®
  â€¢ é‡è¯•å¤±è´¥é¡¹ç›®
```

---

### 6.3 å¤±è´¥å¤„ç†

**å¤±è´¥é¡¹ç›®å¤„ç†**ï¼š

```
ç­–ç•¥ 1ï¼šè®°å½•å¹¶ç»§ç»­
  â€¢ è®°å½•å¤±è´¥è¯¦æƒ…
  â€¢ ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªé¡¹ç›®
  â€¢ æœ€åæ±‡æ€»å¤±è´¥åˆ—è¡¨

ç­–ç•¥ 2ï¼šå¿«é€Ÿå¤±è´¥
  â€¢ é‡åˆ°è‡´å‘½é”™è¯¯ç«‹å³åœæ­¢
  â€¢ ä¿å­˜å½“å‰çŠ¶æ€
  â€¢ è¾“å‡ºé”™è¯¯ä¿¡æ¯

ç­–ç•¥ 3ï¼šéƒ¨åˆ†æˆåŠŸ
  â€¢ Git åŒæ­¥å¤±è´¥ä½†å…ƒæ•°æ®æˆåŠŸ
  â€¢ æˆ–åä¹‹
  â€¢ æ ‡è®°ä¸ºéƒ¨åˆ†æˆåŠŸ
```

**å›æ»šæœºåˆ¶ï¼ˆå¯é€‰ï¼‰**ï¼š

```
Git åŒæ­¥å¤±è´¥å›æ»šï¼š
  â€¢ åˆ é™¤ç›®æ ‡é¡¹ç›®
  â€¢ æˆ–ä¿ç•™ç©ºé¡¹ç›®å¾…åç»­é‡è¯•

å…ƒæ•°æ®åŒæ­¥å¤±è´¥ï¼š
  â€¢ ä¿ç•™å·²åŒæ­¥éƒ¨åˆ†
  â€¢ è®°å½•å¤±è´¥ç‚¹
  â€¢ æ”¯æŒå¢é‡è¡¥å……
```

---

## ä¸ƒã€å®‰å…¨æ€§è®¾è®¡

### 7.1 è®¤è¯å®‰å…¨

**Token ç®¡ç†**ï¼š

```
å­˜å‚¨å®‰å…¨ï¼š
  â€¢ é…ç½®æ–‡ä»¶åŠ å¯†ï¼ˆå¯é€‰ï¼‰
  â€¢ ç¯å¢ƒå˜é‡æ³¨å…¥
  â€¢ å¯†é’¥ç®¡ç†æœåŠ¡é›†æˆï¼ˆå¦‚ Vaultï¼‰

æƒé™æœ€å°åŒ–ï¼š
  â€¢ æº GitLab Token æƒé™ï¼š
    - read_api
    - read_repository
  â€¢ ç›®æ ‡ GitLab Token æƒé™ï¼š
    - api
    - write_repository
    - create_project

Token éªŒè¯ï¼š
  â€¢ å¯åŠ¨æ—¶éªŒè¯ Token æœ‰æ•ˆæ€§
  â€¢ éªŒè¯æƒé™èŒƒå›´
  â€¢ å®šæœŸåˆ·æ–°ï¼ˆé•¿æ—¶é—´è¿è¡Œï¼‰
```

---

### 7.2 æ•°æ®å®‰å…¨

**ä¼ è¾“å®‰å…¨**ï¼š

```
HTTPS å¼ºåˆ¶ï¼š
  â€¢ ä»…å…è®¸ HTTPS è¿æ¥
  â€¢ è¯ä¹¦éªŒè¯
  â€¢ æ”¯æŒè‡ªç­¾åè¯ä¹¦ï¼ˆé…ç½®é¡¹ï¼‰

æ•æ„Ÿæ•°æ®è„±æ•ï¼š
  â€¢ æ—¥å¿—ä¸­ä¸è¾“å‡ºå®Œæ•´ Token
  â€¢ è¾“å‡ºæ ¼å¼ï¼štoken=ghp_***abc (æ˜¾ç¤ºå‰ç¼€å’Œåç¼€)
  â€¢ é”™è¯¯å †æ ˆæ¸…æ´—
```

**æ•°æ®å®Œæ•´æ€§**ï¼š

```
æ ¡éªŒæœºåˆ¶ï¼š
  â€¢ Git æ•°æ®ï¼šSHA å¯¹æ¯”
  â€¢ å…ƒæ•°æ®ï¼šæ•°é‡å¯¹æ¯”ã€æŠ½æ ·éªŒè¯
  â€¢ ä¼ è¾“ï¼šåˆ©ç”¨ Git å†…ç½®æ ¡éªŒ
```

---

### 7.3 è®¿é—®æ§åˆ¶

**æ“ä½œæƒé™**ï¼š

```
åªè¯»æ“ä½œï¼ˆæº GitLabï¼‰ï¼š
  â€¢ è¯»å–åˆ†ç»„/é¡¹ç›®åˆ—è¡¨
  â€¢ è¯»å–ä»“åº“æ•°æ®
  â€¢ è¯»å– Issues/MR

å†™å…¥æ“ä½œï¼ˆç›®æ ‡ GitLabï¼‰ï¼š
  â€¢ åˆ›å»ºåˆ†ç»„/é¡¹ç›®
  â€¢ å†™å…¥ä»“åº“æ•°æ®
  â€¢ åˆ›å»º Issues/MR

ç¦æ­¢æ“ä½œï¼š
  â€¢ åˆ é™¤æº GitLab æ•°æ®
  â€¢ ä¿®æ”¹æº GitLab æ•°æ®
  â€¢ æ‰§è¡Œç®¡ç†æ“ä½œ
```

---

## å…«ã€éƒ¨ç½²ä¸è¿è¡Œ

### 8.1 éƒ¨ç½²æ¨¡å¼

**æ¨¡å¼ 1ï¼šæœ¬åœ°å‘½ä»¤è¡Œ**

```
ç‰¹ç‚¹ï¼š
  â€¢ ä¸€æ¬¡æ€§æ‰§è¡Œ
  â€¢ é€‚åˆå°è§„æ¨¡åŒæ­¥
  â€¢ å¼€å‘è°ƒè¯•å‹å¥½

è¿è¡Œæ–¹å¼ï¼š
  â€¢ ç›´æ¥æ‰§è¡Œè„šæœ¬
  â€¢ è¯»å–é…ç½®æ–‡ä»¶
  â€¢ è¾“å‡ºåˆ°æ§åˆ¶å°
```

**æ¨¡å¼ 2ï¼šDocker å®¹å™¨**

```
ç‰¹ç‚¹ï¼š
  â€¢ ç¯å¢ƒéš”ç¦»
  â€¢ æ˜“äºéƒ¨ç½²
  â€¢ èµ„æºé™åˆ¶

é•œåƒåŒ…å«ï¼š
  â€¢ åŒæ­¥å·¥å…·
  â€¢ Git å®¢æˆ·ç«¯
  â€¢ Python/Go è¿è¡Œæ—¶

æŒ‚è½½ï¼š
  â€¢ é…ç½®æ–‡ä»¶ï¼š/config
  â€¢ æ—¥å¿—è¾“å‡ºï¼š/logs
  â€¢ ä¸´æ—¶æ•°æ®ï¼š/workspace
```

**æ¨¡å¼ 3ï¼šå®šæ—¶ä»»åŠ¡ï¼ˆCronï¼‰**

```
ç‰¹ç‚¹ï¼š
  â€¢ å®šæœŸå¢é‡åŒæ­¥
  â€¢ æ— äººå€¼å®ˆ
  â€¢ é€‚åˆæŒç»­å¤‡ä»½

é…ç½®ï¼š
  â€¢ Cron è¡¨è¾¾å¼ï¼š0 2 * * * (æ¯å¤©å‡Œæ™¨2ç‚¹)
  â€¢ æ‰§è¡Œè„šæœ¬
  â€¢ æ—¥å¿—è½®è½¬
```

**æ¨¡å¼ 4ï¼šæœåŠ¡æ¨¡å¼ï¼ˆå¯é€‰ï¼‰**

```
ç‰¹ç‚¹ï¼š
  â€¢ å¸¸é©»è¿›ç¨‹
  â€¢ HTTP API æ§åˆ¶
  â€¢ Web UI ç®¡ç†

åŠŸèƒ½ï¼š
  â€¢ å¯åŠ¨/åœæ­¢åŒæ­¥
  â€¢ æŸ¥è¯¢è¿›åº¦
  â€¢ æŸ¥çœ‹å†å²è®°å½•
```

---

### 8.2 èµ„æºéœ€æ±‚

**æœ€ä½é…ç½®**ï¼š

```
CPUï¼š2 æ ¸
å†…å­˜ï¼š4GB
ç£ç›˜ï¼š50GBï¼ˆClone & Push ç­–ç•¥ï¼‰
ç½‘ç»œï¼š10Mbps

é€‚ç”¨ï¼š
  â€¢ å°è§„æ¨¡åŒæ­¥ï¼ˆ< 100 é¡¹ç›®ï¼‰
  â€¢ å°ä»“åº“ï¼ˆ< 500MBï¼‰
```

**æ¨èé…ç½®**ï¼š

```
CPUï¼š4-8 æ ¸
å†…å­˜ï¼š8-16GB
ç£ç›˜ï¼š200GB SSD
ç½‘ç»œï¼š100Mbps+

é€‚ç”¨ï¼š
  â€¢ ä¸­è§„æ¨¡åŒæ­¥ï¼ˆ100-1000 é¡¹ç›®ï¼‰
  â€¢ ä¸­ç­‰ä»“åº“ï¼ˆ< 2GBï¼‰
```

**å¤§è§„æ¨¡é…ç½®**ï¼š

```
CPUï¼š16+ æ ¸
å†…å­˜ï¼š32GB+
ç£ç›˜ï¼š1TB+ SSD
ç½‘ç»œï¼š1Gbps+

é€‚ç”¨ï¼š
  â€¢ å¤§è§„æ¨¡åŒæ­¥ï¼ˆ1000+ é¡¹ç›®ï¼‰
  â€¢ å¤§ä»“åº“ï¼ˆ> 2GBï¼‰
```

---

## ä¹ã€æŠ€æœ¯æ ˆé€‰æ‹©

### 9.1 ç¼–ç¨‹è¯­è¨€

**é€‰é¡¹ 1ï¼šPython**

```
ä¼˜åŠ¿ï¼š
  â€¢ python-gitlab åº“æˆç†Ÿ
  â€¢ GitPython æ˜“ç”¨
  â€¢ å¿«é€Ÿå¼€å‘
  â€¢ ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“

åŠ£åŠ¿ï¼š
  â€¢ æ€§èƒ½ç›¸å¯¹è¾ƒä½
  â€¢ GIL é™åˆ¶å¹¶å‘

æ¨èåœºæ™¯ï¼š
  â€¢ å¿«é€ŸåŸå‹
  â€¢ ä¸­å°è§„æ¨¡åŒæ­¥
```

**é€‰é¡¹ 2ï¼šGo**

```
ä¼˜åŠ¿ï¼š
  â€¢ é«˜æ€§èƒ½
  â€¢ åŸç”Ÿå¹¶å‘ï¼ˆGoroutineï¼‰
  â€¢ å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶
  â€¢ go-gitlab åº“å¯ç”¨

åŠ£åŠ¿ï¼š
  â€¢ å¼€å‘é€Ÿåº¦æ…¢äº Python
  â€¢ é”™è¯¯å¤„ç†å•°å—¦

æ¨èåœºæ™¯ï¼š
  â€¢ å¤§è§„æ¨¡åŒæ­¥
  â€¢ æ€§èƒ½è¦æ±‚é«˜
  â€¢ ç”Ÿäº§éƒ¨ç½²
```

**é€‰å‹å»ºè®®**ï¼š

```
MVP é˜¶æ®µï¼šPythonï¼ˆå¿«é€ŸéªŒè¯ï¼‰
ç”Ÿäº§é˜¶æ®µï¼šGoï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰æˆ– Pythonï¼ˆå¦‚æ€§èƒ½æ»¡è¶³éœ€æ±‚ï¼‰
```

---

### 9.2 æ ¸å¿ƒä¾èµ–åº“

**Python æŠ€æœ¯æ ˆ**ï¼š

```
GitLab APIï¼š
  â€¢ python-gitlabï¼šGitLab API å®¢æˆ·ç«¯

Git æ“ä½œï¼š
  â€¢ GitPythonï¼šGit å‘½ä»¤å°è£…
  â€¢ æˆ–ç›´æ¥è°ƒç”¨ git å‘½ä»¤ï¼ˆsubprocessï¼‰

é…ç½®ç®¡ç†ï¼š
  â€¢ PyYAMLï¼šYAML è§£æ
  â€¢ pydanticï¼šé…ç½®éªŒè¯

å¹¶å‘å¤„ç†ï¼š
  â€¢ concurrent.futuresï¼šçº¿ç¨‹/è¿›ç¨‹æ± 
  â€¢ asyncioï¼šå¼‚æ­¥ I/Oï¼ˆå¯é€‰ï¼‰

æ—¥å¿—ï¼š
  â€¢ structlogï¼šç»“æ„åŒ–æ—¥å¿—
  â€¢ loguruï¼šç®€åŒ–æ—¥å¿—ï¼ˆæ›¿ä»£æ–¹æ¡ˆï¼‰

å…¶ä»–ï¼š
  â€¢ clickï¼šCLI æ¡†æ¶
  â€¢ richï¼šç¾åŒ–æ§åˆ¶å°è¾“å‡º
  â€¢ requestsï¼šHTTP å®¢æˆ·ç«¯ï¼ˆpython-gitlab ä¾èµ–ï¼‰
```

**Go æŠ€æœ¯æ ˆ**ï¼š

```
GitLab APIï¼š
  â€¢ go-gitlabï¼šå®˜æ–¹æ¨è

Git æ“ä½œï¼š
  â€¢ go-gitï¼šçº¯ Go å®ç°
  â€¢ æˆ–è°ƒç”¨ç³»ç»Ÿ git å‘½ä»¤ï¼ˆexecï¼‰

é…ç½®ç®¡ç†ï¼š
  â€¢ viperï¼šé…ç½®è¯»å–
  â€¢ validatorï¼šæ•°æ®éªŒè¯

å¹¶å‘å¤„ç†ï¼š
  â€¢ Goroutine + Channelï¼ˆåŸç”Ÿï¼‰
  â€¢ errgroupï¼šé”™è¯¯ç»„ç®¡ç†

æ—¥å¿—ï¼š
  â€¢ zapï¼šé«˜æ€§èƒ½æ—¥å¿—
  â€¢ logrusï¼šç±»ä¼¼ Python logging

å…¶ä»–ï¼š
  â€¢ cobraï¼šCLI æ¡†æ¶
  â€¢ progressbarï¼šè¿›åº¦æ¡
```

---

## åã€å¼€å‘è·¯çº¿å›¾

### Phase 1ï¼šMVPï¼ˆ2 å‘¨ï¼‰

**ç›®æ ‡**ï¼šéªŒè¯æ ¸å¿ƒæµç¨‹å¯è¡Œæ€§

**èŒƒå›´**ï¼š
```
âœ“ é…ç½®æ–‡ä»¶è¯»å–
âœ“ GitLab API è¿æ¥
âœ“ åˆ†ç»„/é¡¹ç›®åˆ—è¡¨è·å–
âœ“ Git åŒæ­¥ï¼ˆClone & Push ç­–ç•¥ï¼‰
âœ“ åŸºç¡€æ—¥å¿—
âœ“ ç®€å•é”™è¯¯å¤„ç†
```

**äº¤ä»˜**ï¼š
- å¯è¿è¡Œçš„å‘½ä»¤è¡Œå·¥å…·
- èƒ½å¤ŸåŒæ­¥å°è§„æ¨¡é¡¹ç›®ï¼ˆ< 10 ä¸ªï¼‰
- åŸºç¡€æ–‡æ¡£

---

### Phase 2ï¼šå®Œå–„æ ¸å¿ƒåŠŸèƒ½ï¼ˆ3 å‘¨ï¼‰

**ç›®æ ‡**ï¼šæ”¯æŒç”Ÿäº§ç¯å¢ƒåŸºæœ¬éœ€æ±‚

**èŒƒå›´**ï¼š
```
âœ“ Push Mirror ç­–ç•¥å®ç°
âœ“ Git ç­–ç•¥æ¥å£æŠ½è±¡
âœ“ å¹¶å‘æ§åˆ¶
âœ“ è¿›åº¦ç›‘æ§
âœ“ æ–­ç‚¹ç»­ä¼ 
âœ“ é‡è¯•æœºåˆ¶
âœ“ è¯¦ç»†æ—¥å¿—
âœ“ é…ç½®éªŒè¯
```

**äº¤ä»˜**ï¼š
- æ”¯æŒä¸¤ç§ Git ç­–ç•¥
- ç¨³å®šæ€§æå‡
- æ€§èƒ½ä¼˜åŒ–

---

### Phase 3ï¼šå…ƒæ•°æ®åŒæ­¥ï¼ˆ2-3 å‘¨ï¼‰

**ç›®æ ‡**ï¼šåŒæ­¥ Issues å’Œ MR

**èŒƒå›´**ï¼š
```
âœ“ Issues åŒæ­¥
âœ“ Merge Requests åŒæ­¥
âœ“ ç”¨æˆ·æ˜ å°„æœºåˆ¶
âœ“ è¯„è®ºåŒæ­¥
âœ“ æ ‡ç­¾/é‡Œç¨‹ç¢‘åŒæ­¥
```

**äº¤ä»˜**ï¼š
- å®Œæ•´çš„é¡¹ç›®åŒæ­¥èƒ½åŠ›
- ç”¨æˆ·æ˜ å°„é…ç½®

---

### Phase 4ï¼šå¢å¼ºåŠŸèƒ½ï¼ˆ2 å‘¨ï¼‰

**ç›®æ ‡**ï¼šæå‡æ˜“ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§

**èŒƒå›´**ï¼š
```
âœ“ å¢é‡åŒæ­¥
âœ“ è¿‡æ»¤è§„åˆ™ï¼ˆé»‘ç™½åå•ï¼‰
âœ“ Hybrid ç­–ç•¥
âœ“ åŒæ­¥æŠ¥å‘Šç”Ÿæˆ
âœ“ é…ç½®å‘å¯¼
âœ“ Web UIï¼ˆå¯é€‰ï¼‰
```

**äº¤ä»˜**ï¼š
- å¢é‡åŒæ­¥èƒ½åŠ›
- æ›´å‹å¥½çš„ç”¨æˆ·ä½“éªŒ

---

### Phase 5ï¼šç”Ÿäº§å°±ç»ªï¼ˆ1-2 å‘¨ï¼‰

**ç›®æ ‡**ï¼šç¨³å®šæ€§å’Œéƒ¨ç½²ä¼˜åŒ–

**èŒƒå›´**ï¼š
```
âœ“ Docker åŒ–
âœ“ å®Œå–„æ–‡æ¡£
âœ“ å•å…ƒæµ‹è¯•
âœ“ é›†æˆæµ‹è¯•
âœ“ æ€§èƒ½æµ‹è¯•
âœ“ å®‰å…¨åŠ å›º
```

**äº¤ä»˜**ï¼š
- Docker é•œåƒ
- å®Œæ•´æ–‡æ¡£ï¼ˆä½¿ç”¨æ‰‹å†Œã€éƒ¨ç½²æŒ‡å—ï¼‰
- æµ‹è¯•æŠ¥å‘Š

---

## åä¸€ã€é£é™©è¯„ä¼°

### 11.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| API é™æµ | é«˜ | ä¸­ | é™æµæ§åˆ¶ã€é™é€Ÿã€åˆ†æ‰¹å¤„ç† |
| å¤§ä»“åº“è¶…æ—¶ | ä¸­ | é«˜ | è¶…æ—¶é…ç½®ã€æµ…å…‹éš†ã€æ–­ç‚¹ç»­ä¼  |
| ç½‘ç»œä¸­æ–­ | ä¸­ | ä¸­ | é‡è¯•æœºåˆ¶ã€çŠ¶æ€ä¿å­˜ |
| ç”¨æˆ·æ˜ å°„å¤±è´¥ | ä½ | é«˜ | é»˜è®¤ç­–ç•¥ã€æ‰‹åŠ¨æ˜ å°„è¡¨ |
| ç£ç›˜ç©ºé—´ä¸è¶³ | é«˜ | ä½ | é¢„æ£€æŸ¥ã€æ¸…ç†æœºåˆ¶ |

---

### 11.2 ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| æ•°æ®ä¸¢å¤± | é«˜ | ä½ | éªŒè¯æœºåˆ¶ã€å¤‡ä»½åŸæ•°æ® |
| æƒé™é—®é¢˜ | ä¸­ | ä¸­ | æƒé™éªŒè¯ã€æ–‡æ¡£è¯´æ˜ |
| ç‰ˆæœ¬ä¸å…¼å®¹ | ä¸­ | ä½ | API ç‰ˆæœ¬æ£€æµ‹ã€å…¼å®¹æ€§æµ‹è¯• |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä¸­ | ä¸­ | æ€§èƒ½æµ‹è¯•ã€ä¼˜åŒ–è¿­ä»£ |

---

## åäºŒã€æ€»ç»“

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–**ï¼šGit åŒæ­¥ç‹¬ç«‹ï¼Œæ˜“äºæ›¿æ¢
2. **å¯æ‰©å±•**ï¼šæ¥å£æŠ½è±¡ï¼Œæ”¯æŒå¤šç§ç­–ç•¥
3. **å®¹é”™æ€§**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
4. **å¯è§‚æµ‹**ï¼šè¯¦ç»†çš„æ—¥å¿—å’Œè¿›åº¦ç›‘æ§
5. **å®‰å…¨æ€§**ï¼šè®¤è¯å®‰å…¨ã€æ•°æ®å®Œæ•´æ€§ä¿éšœ

### å…³é”®æŠ€æœ¯å†³ç­–

1. **Git åŒæ­¥ç­–ç•¥**ï¼šæ”¯æŒ Push Mirror å’Œ Clone & Pushï¼Œå¯æ’æ‹”è®¾è®¡
2. **å¹¶å‘æ¨¡å‹**ï¼šé¡¹ç›®çº§å¹¶å‘ï¼Œçº¿ç¨‹/è¿›ç¨‹æ± 
3. **æ•°æ®ä¸€è‡´æ€§**ï¼šå¤šå±‚éªŒè¯ï¼ŒSHA å¯¹æ¯”
4. **ç”¨æˆ·æ˜ å°„**ï¼šæ˜ å°„è¡¨ + é‚®ç®±åŒ¹é… + é»˜è®¤ç­–ç•¥
5. **é”™è¯¯å¤„ç†**ï¼šåˆ†ç±»å¤„ç† + é‡è¯• + æ–­ç‚¹ç»­ä¼ 

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. ç¡®è®¤æŠ€æœ¯æ ˆé€‰æ‹©ï¼ˆPython/Goï¼‰
2. æ­å»ºå¼€å‘ç¯å¢ƒ
3. å®ç° MVPï¼ˆPhase 1ï¼‰
4. å°è§„æ¨¡æµ‹è¯•éªŒè¯
5. è¿­ä»£ä¼˜åŒ–

---

## åä¸‰ã€æ•°æ®ä¸€è‡´æ€§ä¿è¯æœºåˆ¶

### 13.1 æ ¸å¿ƒåŸåˆ™

**ä¸¥æ ¼ä¸€è‡´æ€§è¦æ±‚**ï¼š
```
ç›®æ ‡ GitLab å¿…é¡»ä¸æº GitLab 100% ä¸€è‡´

åŒ…æ‹¬ï¼š
âœ“ æ‰€æœ‰åˆ†æ”¯åŠå…¶ SHA
âœ“ æ‰€æœ‰æ ‡ç­¾åŠå…¶ SHA
âœ“ å®Œæ•´çš„æäº¤å†å²
âœ“ æ‰€æœ‰ refsï¼ˆnotesã€stash ç­‰ï¼‰
âœ“ åˆ†ç»„å’Œé¡¹ç›®ç»“æ„
âœ“ å…ƒæ•°æ®ï¼ˆIssues/MRï¼Œå¦‚å¯ç”¨ï¼‰
```

**ç¦æ­¢çš„æ“ä½œ**ï¼š
```
âŒ æµ…å…‹éš†ï¼ˆ--depthï¼‰
âŒ éƒ¨åˆ†å…‹éš†ï¼ˆ--filterï¼‰
âŒ å•åˆ†æ”¯å…‹éš†ï¼ˆ--single-branchï¼‰
âŒ è¿‡æ»¤æäº¤å†å²
âŒ ä¿®æ”¹æäº¤ä¿¡æ¯
âŒ é€‰æ‹©æ€§åŒæ­¥åˆ†æ”¯ï¼ˆé™¤éé…ç½®æ˜ç¡®è¦æ±‚ï¼‰
```

---

### 13.2 éªŒè¯æœºåˆ¶

#### å¤šå±‚æ¬¡éªŒè¯

**å±‚çº§ 1ï¼šGit ä»“åº“ç»“æ„éªŒè¯**

```
éªŒè¯é¡¹ï¼š
1. Refs æ•°é‡å®Œå…¨ä¸€è‡´
   â€¢ åˆ†æ”¯æ•°é‡ï¼šgit branch -a | wc -l
   â€¢ æ ‡ç­¾æ•°é‡ï¼šgit tag | wc -l
   â€¢ å…¶ä»– refsï¼šgit show-ref | wc -l

2. Refs å†…å®¹å®Œå…¨ä¸€è‡´
   â€¢ æ¯ä¸ªåˆ†æ”¯çš„ HEAD SHA åŒ¹é…
   â€¢ æ¯ä¸ªæ ‡ç­¾çš„ SHA åŒ¹é…
   â€¢ é»˜è®¤åˆ†æ”¯ä¸€è‡´

3. æäº¤å†å²å®Œæ•´æ€§
   â€¢ git fsck --fullï¼ˆå®Œæ•´æ€§æ£€æŸ¥ï¼‰
   â€¢ æäº¤æ•°é‡ç»Ÿè®¡ï¼ˆå‚è€ƒï¼‰
   â€¢ æ²¡æœ‰æ‚¬æŒ‚å¯¹è±¡ï¼ˆdangling objectsï¼‰

4. ä»“åº“é…ç½®
   â€¢ é»˜è®¤åˆ†æ”¯è®¾ç½®ä¸€è‡´
   â€¢ åˆ†æ”¯ä¿æŠ¤è®¾ç½®ä¸€è‡´ï¼ˆå¯é€‰ï¼‰
```

**å±‚çº§ 2ï¼šå…ƒæ•°æ®éªŒè¯**

```
éªŒè¯é¡¹ï¼š
1. åˆ†ç»„ç»“æ„
   â€¢ åˆ†ç»„æ•°é‡ä¸€è‡´
   â€¢ åˆ†ç»„å±‚çº§ä¸€è‡´
   â€¢ åˆ†ç»„è·¯å¾„å®Œå…¨åŒ¹é…

2. é¡¹ç›®å±æ€§
   â€¢ é¡¹ç›®æ•°é‡ä¸€è‡´
   â€¢ é¡¹ç›®è·¯å¾„ä¸€è‡´
   â€¢ å¯è§æ€§è®¾ç½®ä¸€è‡´

3. åä½œæ•°æ®ï¼ˆå¦‚å¯ç”¨ï¼‰
   â€¢ Issues æ•°é‡å¯¹æ¯”
   â€¢ MR æ•°é‡å¯¹æ¯”
   â€¢ Wiki é¡µé¢æ•°é‡å¯¹æ¯”
```

**å±‚çº§ 3ï¼šæŠ½æ ·éªŒè¯**

```
éªŒè¯ç­–ç•¥ï¼š
1. éšæœºæŠ½æ · 10% çš„é¡¹ç›®
2. å¯¹æ¯ä¸ªæŠ½æ ·é¡¹ç›®æ‰§è¡Œæ·±åº¦éªŒè¯ï¼š
   â€¢ git log --all --oneline | wc -lï¼ˆæäº¤æ•°ï¼‰
   â€¢ git diff origin/main target/mainï¼ˆæ— å·®å¼‚ï¼‰
   â€¢ éšæœºé€‰æ‹© 5 ä¸ªåˆ†æ”¯è¿›è¡Œå®Œæ•´å¯¹æ¯”

3. å¤§å‹é¡¹ç›®å¼ºåˆ¶éªŒè¯
   â€¢ å¤§å° > 1GB çš„é¡¹ç›®
   â€¢ åˆ†æ”¯æ•° > 50 çš„é¡¹ç›®
   â€¢ å…³é”®ä¸šåŠ¡é¡¹ç›®
```

---

### 13.3 éªŒè¯æµç¨‹

#### åŒæ­¥åéªŒè¯æµç¨‹

```
1. ç«‹å³éªŒè¯ï¼ˆåŒæ­¥å®Œæˆåï¼‰
   â”œâ”€ è·å–æºä»“åº“æ‰€æœ‰ refs
   â”‚  â€¢ git ls-remote origin
   â”œâ”€ è·å–ç›®æ ‡ä»“åº“æ‰€æœ‰ refs
   â”‚  â€¢ git ls-remote target
   â”œâ”€ é€ä¸€å¯¹æ¯”
   â”‚  â€¢ refs/heads/* å®Œå…¨åŒ¹é…
   â”‚  â€¢ refs/tags/* å®Œå…¨åŒ¹é…
   â”‚  â€¢ HEAD æŒ‡å‘ä¸€è‡´
   â””â”€ ç”ŸæˆéªŒè¯æŠ¥å‘Š

2. å®Œæ•´æ€§æ£€æŸ¥
   â”œâ”€ æºä»“åº“ï¼šgit fsck
   â”œâ”€ ç›®æ ‡ä»“åº“ï¼šgit fsck
   â””â”€ ä¸¤è€…éƒ½å¿…é¡»æ— é”™è¯¯

3. å·®å¼‚æ£€æµ‹
   â”œâ”€ å¦‚å‘ç°å·®å¼‚ï¼š
   â”‚  â€¢ è®°å½•è¯¦ç»†å·®å¼‚ä¿¡æ¯
   â”‚  â€¢ æ ‡è®°ä¸ºéªŒè¯å¤±è´¥
   â”‚  â€¢ è§¦å‘å‘Šè­¦
   â”‚  â€¢ å¯é€‰ï¼šè‡ªåŠ¨é‡è¯•
   â””â”€ æ— å·®å¼‚ï¼š
      â€¢ æ ‡è®°ä¸ºéªŒè¯æˆåŠŸ
      â€¢ è®°å½•éªŒè¯æ—¶é—´æˆ³

4. éªŒè¯ç»“æœå½’æ¡£
   â”œâ”€ ä¿å­˜éªŒè¯æŠ¥å‘Š
   â”œâ”€ æ›´æ–°é¡¹ç›®çŠ¶æ€
   â””â”€ ç»Ÿè®¡æ±‡æ€»
```

#### å®šæœŸéªŒè¯æµç¨‹ï¼ˆå¯é€‰ï¼‰

```
èƒŒæ™¯ï¼š
  â€¢ é˜²æ­¢ç›®æ ‡ä»“åº“è¢«æ„å¤–ä¿®æ”¹
  â€¢ æ£€æµ‹æ•°æ®æ¼‚ç§»ï¼ˆdriftï¼‰

æµç¨‹ï¼š
1. æ¯å¤©/æ¯å‘¨æ‰§è¡ŒéªŒè¯
2. å¯¹æ‰€æœ‰å·²åŒæ­¥é¡¹ç›®æ‰§è¡Œ refs å¯¹æ¯”
3. å‘ç°å·®å¼‚æ—¶å‘Šè­¦
4. å¯é€‰ï¼šè‡ªåŠ¨é‡æ–°åŒæ­¥ä¿®å¤
```

---

### 13.4 ä¸€è‡´æ€§ä¿è¯æªæ–½

#### æŠ€æœ¯æªæ–½

**1. é•œåƒå…‹éš†ï¼ˆå¿…é¡»ï¼‰**
```
å‘½ä»¤ï¼šgit clone --mirror

ä½œç”¨ï¼š
  â€¢ å…‹éš†æ‰€æœ‰ refsï¼ˆä¸ä»…æ˜¯ HEADï¼‰
  â€¢ å…‹éš†æ‰€æœ‰è¿œç¨‹åˆ†æ”¯
  â€¢ å…‹éš†æ‰€æœ‰æ ‡ç­¾
  â€¢ å…‹éš†å®Œæ•´å†å²
  â€¢ å…‹éš† refs/notesã€refs/stash ç­‰ç‰¹æ®Š refs

ç¦æ­¢ï¼š
  â€¢ git cloneï¼ˆä»…å…‹éš†å½“å‰åˆ†æ”¯ï¼‰
  â€¢ git clone --depth=Nï¼ˆæµ…å…‹éš†ï¼‰
  â€¢ git clone --single-branchï¼ˆå•åˆ†æ”¯ï¼‰
```

**2. é•œåƒæ¨é€ï¼ˆå¿…é¡»ï¼‰**
```
å‘½ä»¤ï¼šgit push --mirror target

ä½œç”¨ï¼š
  â€¢ æ¨é€æ‰€æœ‰ refs
  â€¢ åŒæ­¥åˆ é™¤ç›®æ ‡å¤šä½™çš„ refs
  â€¢ ä¿æŒä¸æºå®Œå…¨ä¸€è‡´

é…åˆï¼š
  â€¢ git push target --pruneï¼ˆæ¸…ç†å·²åˆ é™¤çš„ refsï¼‰
  â€¢ git push target --forceï¼ˆå¤„ç† force pushï¼‰
```

**3. å¢é‡åŒæ­¥çš„ä¸¥æ ¼æ€§**
```
å‘½ä»¤ï¼š
  git fetch origin --prune --tags
  git fetch origin '+refs/heads/*:refs/heads/*' --force

ä½œç”¨ï¼š
  â€¢ --pruneï¼šåˆ é™¤è¿œç¨‹å·²åˆ é™¤çš„ refs
  â€¢ --forceï¼šå¼ºåˆ¶æ›´æ–°æœ¬åœ° refsï¼ˆå¤„ç† force pushï¼‰
  â€¢ +refs/heads/*ï¼šå¼ºåˆ¶æ›´æ–°å¼•ç”¨è¯´æ˜ç¬¦

ä¿è¯ï¼š
  â€¢ å³ä½¿æºä»“åº“å‘ç”Ÿ force pushï¼Œä¹Ÿèƒ½æ­£ç¡®åŒæ­¥
  â€¢ åˆ é™¤çš„åˆ†æ”¯åœ¨æœ¬åœ°ä¹Ÿä¼šåˆ é™¤
  â€¢ é‡å‘½åçš„åˆ†æ”¯èƒ½æ­£ç¡®å¤„ç†
```

**4. LFS å¯¹è±¡åŒæ­¥**
```
é—®é¢˜ï¼š
  â€¢ git clone --mirror ä¸è‡ªåŠ¨æ‹‰å– LFS å¯¹è±¡
  â€¢ ä»…å…‹éš† LFS æŒ‡é’ˆæ–‡ä»¶

è§£å†³ï¼š
  1. æ£€æµ‹æ˜¯å¦ä½¿ç”¨ LFS
     â€¢ git lfs ls-files
  2. æ‹‰å–æ‰€æœ‰ LFS å¯¹è±¡
     â€¢ git lfs fetch --all
  3. æ¨é€ LFS å¯¹è±¡åˆ°ç›®æ ‡
     â€¢ git lfs push target --all

ä¿è¯ï¼š
  â€¢ LFS å¤§æ–‡ä»¶å®Œæ•´åŒæ­¥
  â€¢ ä¸é—æ¼ä»»ä½•æ–‡ä»¶
```

---

### 13.5 å¤±è´¥å¤„ç†

#### éªŒè¯å¤±è´¥çš„å¤„ç†ç­–ç•¥

**ç­–ç•¥ 1ï¼šè‡ªåŠ¨é‡è¯•**
```
æ¡ä»¶ï¼š
  â€¢ é¦–æ¬¡éªŒè¯å¤±è´¥
  â€¢ å¤±è´¥åŸå› æ˜¯ä¸´æ—¶æ€§çš„ï¼ˆç½‘ç»œã€è¶…æ—¶ï¼‰

æµç¨‹ï¼š
1. ç­‰å¾… 1 åˆ†é’Ÿ
2. é‡æ–°æ‰§è¡ŒåŒæ­¥
3. é‡æ–°éªŒè¯
4. æœ€å¤šé‡è¯• 3 æ¬¡
```

**ç­–ç•¥ 2ï¼šå‘Šè­¦é€šçŸ¥**
```
æ¡ä»¶ï¼š
  â€¢ é‡è¯•ä»å¤±è´¥
  â€¢ å‘ç°æ•°æ®ä¸ä¸€è‡´

æµç¨‹ï¼š
1. ç”Ÿæˆè¯¦ç»†å·®å¼‚æŠ¥å‘Š
   â€¢ ç¼ºå¤±çš„åˆ†æ”¯åˆ—è¡¨
   â€¢ SHA ä¸åŒ¹é…çš„åˆ†æ”¯åˆ—è¡¨
   â€¢ å¤šä½™çš„åˆ†æ”¯åˆ—è¡¨
2. å‘é€å‘Šè­¦
   â€¢ é‚®ä»¶é€šçŸ¥
   â€¢ é’‰é’‰/Slack é€šçŸ¥
3. æ ‡è®°é¡¹ç›®ä¸º"éœ€è¦äººå·¥ä»‹å…¥"
4. æš‚åœåç»­è‡ªåŠ¨åŒæ­¥
```

**ç­–ç•¥ 3ï¼šå¼ºåˆ¶é‡æ–°åŒæ­¥**
```
æ¡ä»¶ï¼š
  â€¢ ç®¡ç†å‘˜æ‰‹åŠ¨è§¦å‘
  â€¢ éªŒè¯å¤±è´¥ä¸”æ— æ³•è‡ªåŠ¨ä¿®å¤

æµç¨‹ï¼š
1. åˆ é™¤ç›®æ ‡ä»“åº“ï¼ˆå¯é€‰å¤‡ä»½ï¼‰
2. åˆ é™¤æœ¬åœ°ç¼“å­˜ä»“åº“
3. é‡æ–°æ‰§è¡Œé¦–æ¬¡åŒæ­¥
4. å®Œæ•´éªŒè¯
```

---

### 13.6 éªŒè¯æŠ¥å‘Šæ ¼å¼

#### æˆåŠŸæŠ¥å‘Šç¤ºä¾‹

```json
{
  "project": "group/subgroup/project",
  "validation_time": "2025-12-13T12:00:00Z",
  "status": "success",
  "summary": {
    "branches": {
      "count": 15,
      "all_match": true
    },
    "tags": {
      "count": 8,
      "all_match": true
    },
    "refs_total": 25,
    "fsck_status": "ok"
  },
  "details": {
    "default_branch": "main",
    "default_branch_sha": "abc123...",
    "total_commits": 1523,
    "repo_size_bytes": 125829120
  }
}
```

#### å¤±è´¥æŠ¥å‘Šç¤ºä¾‹

```json
{
  "project": "group/subgroup/project",
  "validation_time": "2025-12-13T12:00:00Z",
  "status": "failed",
  "summary": {
    "branches": {
      "count_source": 15,
      "count_target": 14,
      "all_match": false
    },
    "tags": {
      "count": 8,
      "all_match": true
    }
  },
  "errors": [
    {
      "type": "missing_branch",
      "ref": "refs/heads/feature/new-feature",
      "expected_sha": "def456...",
      "actual_sha": null,
      "message": "Branch exists in source but missing in target"
    }
  ],
  "recommended_action": "Re-sync the repository"
}
```

---

### 13.7 ä¸€è‡´æ€§ä¿è¯æ€»ç»“

**æ ¸å¿ƒä¿è¯**ï¼š

1. âœ… **å®Œæ•´å…‹éš†**ï¼šä½¿ç”¨ `git clone --mirror`ï¼Œæ— æµ…å…‹éš†
2. âœ… **å®Œæ•´æ¨é€**ï¼šä½¿ç”¨ `git push --mirror`ï¼Œæ¨é€æ‰€æœ‰ refs
3. âœ… **ä¸¥æ ¼éªŒè¯**ï¼šéªŒè¯æ‰€æœ‰ refs çš„ SHAï¼Œ100% åŒ¹é…
4. âœ… **LFS æ”¯æŒ**ï¼šåŒæ­¥æ‰€æœ‰ LFS å¯¹è±¡
5. âœ… **åˆ é™¤åŒæ­¥**ï¼šä½¿ç”¨ `--prune`ï¼ŒåŒæ­¥åˆ é™¤æ“ä½œ
6. âœ… **å¼ºåˆ¶æ›´æ–°**ï¼šä½¿ç”¨ `--force`ï¼Œå¤„ç† force push
7. âœ… **å®Œæ•´æ€§æ£€æŸ¥**ï¼šè¿è¡Œ `git fsck`ï¼Œç¡®ä¿æ— æŸå
8. âœ… **å¤šå±‚éªŒè¯**ï¼šç»“æ„ + å†…å®¹ + æŠ½æ ·ï¼Œå…¨é¢éªŒè¯

**å¤±è´¥ä¿æŠ¤**ï¼š

1. âš ï¸ **éªŒè¯å¤±è´¥å³å‘Šè­¦**ï¼šä¸å®¹å¿ä»»ä½•å·®å¼‚
2. âš ï¸ **è‡ªåŠ¨é‡è¯•æœ‰é™**ï¼šæœ€å¤š 3 æ¬¡ï¼Œé¿å…æ— é™å¾ªç¯
3. âš ï¸ **äººå·¥ä»‹å…¥æœºåˆ¶**ï¼šæ— æ³•è‡ªåŠ¨ä¿®å¤æ—¶äººå·¥å¤„ç†
4. âš ï¸ **è¯¦ç»†å·®å¼‚æŠ¥å‘Š**ï¼šå‡†ç¡®å®šä½é—®é¢˜

**é•¿æœŸä¿éšœ**ï¼š

1. ğŸ“Š **å®šæœŸéªŒè¯**ï¼šå¯é€‰çš„å‘¨æœŸæ€§ä¸€è‡´æ€§æ£€æŸ¥
2. ğŸ“Š **æ¼‚ç§»æ£€æµ‹**ï¼šå‘ç°ç›®æ ‡ä»“åº“è¢«æ„å¤–ä¿®æ”¹
3. ğŸ“Š **å®¡è®¡æ—¥å¿—**ï¼šå®Œæ•´çš„åŒæ­¥å’ŒéªŒè¯å†å²è®°å½•

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.1ï¼ˆå·²æ›´æ–°ä¸€è‡´æ€§ä¿è¯ï¼‰
**åˆ›å»ºæ—¥æœŸ**ï¼š2025-12-13
**æœ€åæ›´æ–°**ï¼š2025-12-13
**ä½œè€…**ï¼šGitLab åŒæ­¥å™¨é¡¹ç›®ç»„
