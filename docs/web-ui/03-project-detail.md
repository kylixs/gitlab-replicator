# Web UI 模块 3: Project Detail (项目详情)

**状态**: ⏸️ 待处理 (Pending)

**目标**: 实现项目详情页面，包含概览、分支对比、同步事件三个Tab页。

**预计时间**: 4-5天

**相关文档**:
- [Web UI 需求清单](../web-ui-requirements.md#23-project-detail-项目详情)

---

## ⚠️ 重要提醒：任务状态管理规范

**【必须】在开始处理下面的每个子任务前及后需要修改其任务状态：**

1. **开始任务前**：将任务状态从 `⏸️ 待处理 (Pending)` 修改为 `🔄 进行中 (In Progress)`
2. **完成任务后**：将任务状态修改为 `✅ 已完成 (Completed)` 或 `❌ 失败 (Failed)`
3. **更新位置**：在本文档对应任务的 `**状态**:` 行进行修改

---

## 任务清单

### T3.1 后端 API - 项目概览
**状态**: ⏸️ 待处理
**依赖**: 无

**任务目标**:
- 创建项目概览 API
- 返回 Source/Target 项目信息
- 返回差异统计
- 返回延时计算

**API 端点**:
```java
GET /api/sync/projects/{id}/overview
响应: {
  "success": true,
  "data": {
    "project": { SyncProject对象 },
    "source": { SourceProjectInfo对象 },
    "target": { TargetProjectInfo对象 },
    "diff": {
      "branchNew": 3,
      "branchDeleted": 1,
      "branchOutdated": 2,
      "commitDiff": 125
    },
    "delay": {
      "seconds": 300,
      "formatted": "5分钟"
    },
    "nextSyncTime": "2025-12-23T14:35:00"
  }
}
```

**验收标准**:
- API 返回完整数据
- 差异计算正确
- 延时计算正确
- 下次同步时间预估准确

**测试要求**:
- 单元测试
- 数据完整性测试

**提交**: `feat(web-ui): add project overview API`

---

### T3.2 前端页面 - 详情页布局
**状态**: ⏸️ 待处理
**依赖**: T3.1

**任务目标**:
- 创建 ProjectDetail 页面
- 实现 Tab 页结构
- 实现顶部操作栏
- 实现面包屑导航

**组件结构**:
```
views/ProjectDetail.vue
├─ components/
│  ├─ OverviewTab.vue        # 概览Tab
│  ├─ BranchesTab.vue        # 分支对比Tab
│  ├─ EventsTab.vue          # 同步事件Tab
│  ├─ StatusCard.vue         # 状态卡片
│  ├─ ProjectInfo.vue        # 项目信息
│  └─ DiffStats.vue          # 差异统计
```

**验收标准**:
- Tab 切换正常
- 顶部操作栏显示正确
- 面包屑导航正确
- 布局响应式

**测试要求**:
- 组件测试
- 路由测试

**提交**: `feat(web-ui): add project detail layout`

---

### T3.3 前端功能 - 概览Tab
**状态**: ⏸️ 待处理
**依赖**: T3.2

**任务目标**:
- 实现状态卡片
- 实现Source/Target信息卡片
- 实现差异统计卡片
- 实现同步配置显示

**功能需求**:
- 状态卡片: 当前状态、延时、最后同步时间
- 项目信息: Source/Target 双栏布局
- 差异统计: 4个并排卡片
- 同步配置: 同步方式、频率等

**验收标准**:
- 所有卡片正确显示
- 数据准确
- 布局美观
- 响应式适配

**测试要求**:
- 数据渲染测试
- 布局测试

**提交**: `feat(web-ui): implement overview tab`

---

### T3.4 前端功能 - 分支对比Tab
**状态**: ⏸️ 待处理
**依赖**: T3.2

**任务目标**:
- 实现统计卡片
- 实现分支对比表格
- 实现分支详情展开
- 实现筛选器

**功能需求**:
- 统计卡片: 已同步/待同步/缺失/多余
- 分支表格: 分支名、状态、Commit、延时
- 展开行: 显示完整 Commit 信息
- 筛选: 按状态、搜索分支名

**验收标准**:
- 统计准确
- 表格正确显示
- 展开功能正常
- 筛选生效

**测试要求**:
- 数据渲染测试
- 展开测试
- 筛选测试

**提交**: `feat(web-ui): implement branches comparison tab`

---

### T3.5 前端功能 - 同步事件Tab
**状态**: ⏸️ 待处理
**依赖**: T3.2

**任务目标**:
- 实现事件时间线表格
- 实现事件详情展开
- 实现筛选器
- 实现重试操作

**功能需求**:
- 事件表格: 时间、类型、状态、详情、耗时
- 展开详情: JSON 格式，包含分支列表或错误信息
- 筛选: 事件类型、状态、日期
- 操作: 查看日志、重试

**验收标准**:
- 时间线正确显示
- 详情展开正确
- 筛选生效
- 重试功能正常

**测试要求**:
- 数据渲染测试
- 展开测试
- 筛选测试
- 重试测试

**提交**: `feat(web-ui): implement sync events tab`

---

### T3.6 前端功能 - 顶部操作栏
**状态**: ⏸️ 待处理
**依赖**: T3.2

**任务目标**:
- 实现返回列表按钮
- 实现立即同步按钮
- 实现暂停/恢复按钮
- 实现删除按钮

**功能需求**:
- 返回按钮: 跳转到项目列表
- 立即同步: 触发同步，显示进度
- 暂停/恢复: 根据状态切换
- 删除: 二次确认对话框

**验收标准**:
- 按钮状态正确
- 操作触发成功
- 确认对话框显示
- 跳转正确

**测试要求**:
- 按钮测试
- 操作测试
- 跳转测试

**提交**: `feat(web-ui): add project detail action bar`

---

### T3.7 前端优化 - 数据刷新
**状态**: ⏸️ 待处理
**依赖**: T3.3, T3.4, T3.5

**任务目标**:
- 实现自动刷新
- 实现手动刷新
- 实现 WebSocket 实时更新（可选）

**功能需求**:
- 每30秒自动刷新概览数据
- 手动刷新按钮
- 同步状态实时更新

**验收标准**:
- 自动刷新生效
- 手动刷新正常
- 实时更新准确（如果实现）

**测试要求**:
- 刷新测试
- 实时更新测试

**提交**: `feat(web-ui): add data refresh for project detail`

---

## 模块输出

- ✅ 项目概览 API
- ✅ ProjectDetail 页面和子组件
- ✅ 概览 Tab (状态、项目信息、差异统计)
- ✅ 分支对比 Tab (统计、表格、筛选)
- ✅ 同步事件 Tab (时间线、详情、筛选)
- ✅ 顶部操作栏
- ✅ 数据刷新机制

---

## 关键决策

1. **Tab 结构**: 3个 Tab（概览、分支、事件），简化配置Tab
2. **数据获取**: 每个 Tab 独立获取数据，避免一次加载过多
3. **事件详情**: 使用 JSON 格式，支持不同事件类型
4. **刷新策略**: 自动刷新 + 手动刷新 + 实时更新（可选）

---

## UI/UX 规范

**概览Tab布局**:
- 状态卡片: 顶部突出显示
- 项目信息: 左右两栏（Source/Target）
- 差异统计: 4个并排小卡片
- 同步配置: 底部列表形式

**分支Tab布局**:
- 统计卡片: 顶部4个并排
- 筛选器: 表格上方
- 分支表格: 主要内容区
- 展开行: 显示详细 Commit 信息

**事件Tab布局**:
- 筛选器: 表格上方
- 事件表格: 按时间倒序
- 展开行: JSON 格式化显示

---

## 注意事项

1. **路由参数**: 使用项目 ID，确保刷新后正确
2. **权限**: 删除操作需要二次确认
3. **性能**: 分支对比数据可能很大，注意分页
4. **事件详情**: JSON 格式需要美化显示
5. **响应式**: 确保在不同屏幕尺寸下正常显示
