# 任务清单模板和规范要求

本文档定义了项目任务清单的标准模板和编写规范，用于保证任务文档的一致性和完整性。

---

## 文档结构模板

```markdown
# 模块 X: 模块名称 (Module Name)

**状态**: ⏸️ 待处理 (Pending)

**目标**: 简要描述模块的主要目标和功能范围。

**预计时间**: X天

---

## 参考文档

- [相关设计文档](../path/to/design.md)
  - [设计章节1](../path/to/design.md#section-1)
  - [设计章节2](../path/to/design.md#section-2)

---

## ⚠️ 重要提醒：任务状态管理规范

**【必须】在开始处理下面的每个子任务前及后需要修改其任务状态：**

1. **开始任务前**：将任务状态从 `⏸️ 待处理 (Pending)` 修改为 `🔄 进行中 (In Progress)`
2. **完成任务后**：将任务状态修改为 `✅ 已完成 (Completed)` 或 `❌ 失败 (Failed)`
3. **更新位置**：在本文档对应任务的 `**状态**:` 行进行修改

**状态标记说明**：
- `⏸️ 待处理 (Pending)` - 任务未开始
- `🔄 进行中 (In Progress)` - 任务正在处理中
- `✅ 已完成 (Completed)` - 任务成功完成，测试通过
- `❌ 失败 (Failed)` - 任务失败，需要修复
- `⚠️ 阻塞 (Blocked)` - 任务被依赖阻塞

---

## 任务清单

### TX.1 任务名称
**状态**: ⏸️ 待处理 (Pending)
**依赖**: 无 / 模块Y / TX.0

**任务目标**:
简要描述任务要实现的功能和目的（1-2句话）

**文件路径**: `path/to/file.java` / `path/to/directory/`

**核心功能** / **表结构设计** / **API端点列表**:
1. 功能点1 / 表名 / 端点名
   - 子项1
   - 子项2

2. 功能点2
   - 子项1
   - 子项2

**核心方法** / **核心逻辑** / **核心改造**:
- `methodName(params)` - 方法说明
  - 处理步骤1
  - 处理步骤2

**关键点**:
- 关键技术点1
- 关键技术点2
- 注意事项

**验收标准**:
- 功能验收标准1
- 功能验收标准2
- 编写并通过单元测试验证XXX功能

**提交**: `type(scope): commit message description`

---

## 模块验收

**验收检查项**:
1. 检查项1
2. 检查项2
3. 检查项3

**完成标志**: 所有任务状态为 ✅，模块状态更新为 ✅ 已完成
```

---

## 编写规范要求

### 1. 文档头部信息

#### 1.1 模块标题
- **格式**: `# 模块 X: 模块名称 (Module Name)`
- **要求**:
  - 使用一级标题
  - 包含模块编号（如：模块 1、模块 2）
  - 中英文名称并列，英文使用括号包裹

#### 1.2 模块状态
- **格式**: `**状态**: 状态标记 状态描述`
- **状态标记**:
  - ⏸️ 待处理 (Pending)
  - 🔄 进行中 (In Progress)
  - ✅ 已完成 (Completed)
  - ❌ 失败 (Failed)
  - ⚠️ 阻塞 (Blocked)

#### 1.3 模块目标
- **要求**:
  - 简洁明确，1-2句话说明模块功能
  - 说明模块的核心价值和范围

#### 1.4 预计时间
- **格式**: `**预计时间**: X天` 或 `X-Y天`
- **要求**:
  - 合理评估工作量
  - 包含开发、测试、调试时间

### 2. 参考文档章节

#### 2.1 格式要求
```markdown
## 参考文档

- [设计文档标题](相对路径)
  - [章节1](相对路径#anchor-1)
  - [章节2](相对路径#anchor-2)
```

#### 2.2 内容要求
- 必须包含相关设计文档的链接
- 链接到具体相关章节
- 使用相对路径（如：`../authentication-design.md`）
- 确保链接有效可访问

### 3. 任务状态管理规范章节

#### 3.1 必须包含
所有任务清单文档必须包含完整的任务状态管理规范说明。

#### 3.2 标准格式
使用模板中的标准格式，不可省略或修改。

### 4. 任务清单

#### 4.1 任务编号
- **格式**: `TX.Y` 其中X为模块编号，Y为任务序号
- **示例**: T1.1、T1.2、T2.1、T2.2

#### 4.2 任务标题
- **格式**: `### TX.Y 任务名称`
- **要求**:
  - 使用三级标题
  - 任务名称简洁明确
  - 体现任务的核心内容

#### 4.3 任务元信息
必须包含以下三项：
```markdown
**状态**: ⏸️ 待处理 (Pending)
**依赖**: 无 / 模块Y / TX.0
```

**依赖说明**:
- `无` - 无前置依赖
- `模块Y` - 依赖整个模块完成
- `TX.0` - 依赖特定任务
- `TX.1, TX.2` - 依赖多个任务（用逗号分隔）

#### 4.4 任务目标
- **要求**:
  - 1-2句话说明任务要实现什么
  - 明确任务的输入和输出
  - 避免过度详细的实现细节

#### 4.5 文件路径
- **格式**: `**文件路径**: \`path/to/file.ext\``
- **要求**:
  - 使用反引号标记路径
  - 使用项目根目录的相对路径
  - 如果涉及多个文件，可以列表形式呈现
  - 目录路径以 `/` 结尾

#### 4.6 核心内容章节

根据任务类型选择合适的章节名称：

- **数据库任务**: 使用 `**表结构设计**:`
- **API任务**: 使用 `**API端点列表**:`
- **服务类任务**: 使用 `**核心功能**:` 和 `**核心方法**:`
- **改造任务**: 使用 `**核心改造**:`

**内容要求**:
- 使用有序列表或无序列表
- 包含必要的子项说明
- 简明扼要，避免代码细节
- 重点说明：做什么、怎么做、关键参数

**示例1 - API端点**:
```markdown
**API端点列表**:

1. **POST /api/auth/login** - 登录
   - 请求：`LoginRequest`
   - 响应：`ApiResponse<LoginResponse>`
   - 状态码：200 / 401（认证失败）
```

**示例2 - 核心方法**:
```markdown
**核心方法**:
1. **login(username, password)** - 登录验证
   - 检查防暴力破解限制
   - 验证挑战码有效性
   - 使用SCRAM验证ClientProof
   - 生成Token并记录审计日志
```

#### 4.7 关键点
- **要求**:
  - 使用无序列表
  - 说明技术选型、注意事项、最佳实践
  - 3-5个要点
  - 每个要点独立成句

**示例**:
```markdown
**关键点**:
- 使用 `@RestController` 和 `@RequestMapping`
- 使用 `@Valid` 验证请求
- 统一响应格式 `ApiResponse`
- 提取IP考虑X-Forwarded-For头
```

#### 4.8 验收标准

**必须包含**:
- 功能性验收标准（3-5条）
- 单元测试要求（必须有）

**格式**:
```markdown
**验收标准**:
- 功能验收标准1
- 功能验收标准2
- 功能验收标准3
- 编写并通过单元测试验证XXX功能
```

**要求**:
- 标准要明确、可测试
- 最后一条必须是单元测试要求
- 单元测试要求格式：`编写并通过单元测试验证XXX功能`
- 避免模糊表述（如"基本正常"、"大致可用"）

#### 4.9 提交信息
- **格式**: `**提交**: \`type(scope): description\``
- **Commit类型**:
  - `feat` - 新功能
  - `fix` - 修复bug
  - `refactor` - 重构
  - `test` - 测试相关
  - `docs` - 文档
  - `build` - 构建相关
  - `chore` - 杂项

**示例**:
```markdown
**提交**: `feat(auth): add authentication REST API controller`
```

### 5. 模块验收章节

#### 5.1 必须包含
每个任务清单文档末尾必须有模块验收章节。

#### 5.2 验收检查项
- 列出3-6个模块级别的检查项
- 涵盖功能、性能、集成测试
- 高层次、综合性的验收标准

#### 5.3 完成标志
标准格式：
```markdown
**完成标志**: 所有任务状态为 ✅，模块状态更新为 ✅ 已完成
```

---

## 文档质量检查清单

在提交任务清单文档前，请检查以下各项：

### 必须项 ✅

- [ ] 文档包含完整的头部信息（标题、状态、目标、预计时间）
- [ ] 包含参考文档章节，且链接有效
- [ ] 包含任务状态管理规范章节
- [ ] 每个任务都有完整的元信息（状态、依赖）
- [ ] 每个任务都有明确的验收标准
- [ ] 每个验收标准都包含单元测试要求
- [ ] 每个任务都有提交信息
- [ ] 文档末尾有模块验收章节

### 内容质量 ✅

- [ ] 任务目标清晰，不含实现细节
- [ ] 文件路径准确，使用反引号标记
- [ ] 核心功能/方法描述简洁明了
- [ ] 关键点突出技术要点和注意事项
- [ ] 验收标准明确、可测试
- [ ] 任务之间的依赖关系正确

### 格式规范 ✅

- [ ] 使用正确的标题层级（#、##、###）
- [ ] 状态标记使用emoji图标
- [ ] 代码、路径使用反引号包裹
- [ ] 列表格式统一（有序/无序）
- [ ] 中英文之间有适当空格
- [ ] 文档末尾有分隔线

---

## 示例参考

参考以下文档作为编写示例：

1. **数据库和实体**: `docs/authentication/01-database-entities.md`
   - 数据库表设计
   - 实体类创建
   - Mapper接口

2. **后端服务**: `docs/authentication/02-backend-services.md`
   - 工具类实现
   - 业务服务
   - 过滤器改造

3. **后端API**: `docs/authentication/03-backend-api.md`
   - DTO设计
   - Controller实现
   - 异常处理

4. **前端实现**: `docs/authentication/04-frontend-implementation.md`
   - 前端组件
   - 状态管理
   - 路由配置

---

## 常见问题

### Q1: 任务粒度如何把握？
**A**: 单个任务应该：
- 预计工作量：0.5-1天
- 可独立编译和测试
- 产生明确的交付物（代码文件、配置、文档）
- 如果超过1天，考虑拆分

### Q2: 是否需要包含完整代码？
**A**: 不需要。任务清单应该：
- 说明"做什么"而不是"怎么做"
- 列出核心方法签名，不需要完整实现
- 描述处理流程，不需要具体代码
- 提供关键技术点和注意事项

### Q3: 验收标准如何编写？
**A**: 验收标准应该：
- 可观察、可测试、可验证
- 避免主观判断（如"性能良好"）
- 使用量化指标（如"4096次迭代<100ms"）
- 必须包含单元测试要求

### Q4: 依赖关系如何表示？
**A**:
- 无依赖：`**依赖**: 无`
- 依赖整个模块：`**依赖**: 模块1`
- 依赖单个任务：`**依赖**: T1.1`
- 依赖多个任务：`**依赖**: T1.1, T1.2, 模块2`

### Q5: 任务状态何时更新？
**A**:
- 开始任务前：更新为 🔄 进行中
- 完成并测试通过：更新为 ✅ 已完成
- 遇到错误或阻塞：更新为 ❌ 失败 或 ⚠️ 阻塞
- 同时只有一个任务应该是"进行中"状态

---

## 附录：Markdown格式速查

### 标题
```markdown
# 一级标题
## 二级标题
### 三级标题
```

### 列表
```markdown
1. 有序列表项1
2. 有序列表项2

- 无序列表项1
- 无序列表项2
```

### 代码和路径
```markdown
`code` - 行内代码
`path/to/file.java` - 文件路径
```

### 链接
```markdown
[链接文字](相对路径)
[章节链接](../doc.md#section-name)
```

### 加粗和强调
```markdown
**加粗文字**
*斜体文字*
```

---

**文档版本**: v1.0
**最后更新**: 2025-12-25
**维护者**: GitLab Mirror Team
