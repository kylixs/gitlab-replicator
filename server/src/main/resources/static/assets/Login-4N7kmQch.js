import{d as A,u as I,r as K,a as M,c as b,b as a,w as s,e as l,f as R,o as n,g as r,h as q,i as w,j as x,k as V,l as e,m as D,n as T,t as c,p as y,E as j,_ as G}from"./index-T99Mt4LO.js";const W={class:"login-container"},Y={key:0},F={key:1},H=A({__name:"Login",setup(J){const C=R(),{login:L,isLoading:d,error:k,failureCount:m,lockoutSeconds:E,isLocked:i,clearError:S}=I(),p=K(),t=M({username:"",password:""}),P={username:[{required:!0,message:"Please enter username",trigger:"blur"},{min:3,max:50,message:"Username should be 3-50 characters",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,message:"Password should be at least 6 characters",trigger:"blur"}]};async function u(){if(!p.value)return;try{await p.value.validate()}catch{return}await L(t.username,t.password)&&(j.success("Login successful"),C.push("/"))}return(B,o)=>{const h=l("el-icon"),v=l("el-input"),f=l("el-form-item"),_=l("el-alert"),N=l("el-button"),U=l("el-form"),z=l("el-card");return n(),b("div",W,[a(z,{class:"login-card",shadow:"always"},{header:s(()=>[...o[2]||(o[2]=[r("div",{class:"card-header"},[r("h2",null,"GitLab Mirror"),r("p",null,"Sign in to your account")],-1)])]),default:s(()=>[a(U,{ref_key:"formRef",ref:p,model:t,rules:P,"label-position":"top",onSubmit:q(u,["prevent"])},{default:s(()=>[a(f,{label:"Username",prop:"username"},{default:s(()=>[a(v,{modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=g=>t.username=g),placeholder:"Enter your username",size:"large",disabled:e(i)||e(d),onKeyup:V(u,["enter"])},{prefix:s(()=>[a(h,null,{default:s(()=>[a(e(D))]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),a(f,{label:"Password",prop:"password"},{default:s(()=>[a(v,{modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=g=>t.password=g),type:"password",placeholder:"Enter your password",size:"large",disabled:e(i)||e(d),"show-password":"",onKeyup:V(u,["enter"])},{prefix:s(()=>[a(h,null,{default:s(()=>[a(e(T))]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),e(i)?(n(),w(_,{key:0,type:"error",closable:!1,"show-icon":"",class:"alert-box"},{title:s(()=>[...o[3]||(o[3]=[y(" Account Locked ",-1)])]),default:s(()=>[r("div",null," Too many failed login attempts. Please try again in "+c(e(E))+" seconds. ",1)]),_:1})):e(m)>=3?(n(),w(_,{key:1,type:"warning",closable:!1,"show-icon":"",class:"alert-box"},{title:s(()=>[...o[4]||(o[4]=[y(" Warning ",-1)])]),default:s(()=>[r("div",null,c(e(m))+" failed login attempts. Your account will be locked after "+c(10-e(m))+" more failed attempts. ",1)]),_:1})):x("",!0),e(k)&&!e(i)?(n(),w(_,{key:2,type:"error",closable:!0,"show-icon":"",class:"alert-box",onClose:e(S)},{default:s(()=>[y(c(e(k)),1)]),_:1},8,["onClose"])):x("",!0),a(f,null,{default:s(()=>[a(N,{type:"primary",size:"large",class:"login-button",loading:e(d),disabled:e(i),onClick:u},{default:s(()=>[e(d)?(n(),b("span",F,"Signing In...")):(n(),b("span",Y,"Sign In"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),o[5]||(o[5]=r("div",{class:"login-footer"},[r("p",null,"Default credentials: admin / Admin@123")],-1))]),_:1})])}}}),Q=G(H,[["__scopeId","data-v-addb22e8"]]);export{Q as default};
